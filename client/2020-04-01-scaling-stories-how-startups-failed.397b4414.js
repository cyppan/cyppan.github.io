import{S as e,i as a,s as t,e as o,a as r,t as n,q as s,c as i,f as l,d as c,b as h,k as d,g as u,l as p,j as f,h as g,n as y}from"./client.935b08cb.js";function m(e){let a,t,m,v,b,w,E,k,I,T,x,S,R,L,O,A,q,G,P,N,C,B,D,M,V,z,U,W,H,j,$,_,F,Y,Z,Q,K,J,X,ee,ae,te,oe,re,ne,se,ie,le,ce,he,de,ue,pe,fe,ge,ye,me,ve,be,we,Ee,ke,Ie,Te,xe,Se,Re,Le,Oe,Ae,qe,Ge,Pe,Ne,Ce,Be,De,Me,Ve,ze,Ue,We,He,je,$e,_e,Fe,Ye,Ze,Qe,Ke,Je,Xe,ea,aa,ta,oa,ra,na,sa,ia,la,ca,ha,da,ua,pa,fa,ga,ya,ma,va,ba,wa,Ea,ka,Ia,Ta,xa,Sa,Ra,La,Oa,Aa,qa,Ga,Pa,Na,Ca,Ba,Da,Ma,Va,za,Ua,Wa,Ha,ja,$a,_a,Fa,Ya,Za,Qa,Ka,Ja,Xa,et,at,tt,ot,rt,nt,st,it,lt,ct,ht,dt,ut,pt,ft,gt,yt,mt,vt,bt,wt,Et,kt,It,Tt,xt,St,Rt,Lt,Ot,At,qt,Gt,Pt,Nt,Ct,Bt,Dt,Mt,Vt,zt,Ut,Wt,Ht,jt,$t,_t,Ft,Yt,Zt,Qt,Kt,Jt,Xt,eo,ao,to,oo,ro,no,so,io,lo,co,ho,uo,po,fo,go,yo,mo,vo,bo,wo,Eo,ko,Io,To,xo,So,Ro,Lo,Oo,Ao,qo,Go,Po,No,Co,Bo,Do,Mo,Vo,zo,Uo,Wo,Ho,jo,$o,_o,Fo,Yo,Zo,Qo,Ko,Jo,Xo,er,ar,tr,or,rr,nr,sr,ir,lr,cr,hr,dr,ur,pr,fr,gr,yr,mr,vr,br,wr,Er,kr,Ir,Tr,xr,Sr,Rr,Lr,Or,Ar,qr,Gr,Pr,Nr,Cr,Br,Dr,Mr,Vr,zr,Ur,Wr,Hr,jr,$r,_r,Fr,Yr,Zr,Qr,Kr,Jr,Xr,en,an,tn,on,rn,nn,sn,ln,cn,hn,dn,un,pn,fn,gn,yn,mn,vn,bn,wn,En,kn,In;return document.title=a="\n    @cyppan | "+e[0]+"\n  ",{c(){t=o("link"),m=o("meta"),b=o("meta"),w=o("meta"),E=o("meta"),k=o("meta"),I=o("meta"),T=r(),x=o("section"),S=o("div"),R=o("div"),L=o("div"),O=o("h1"),A=n(e[0]),q=r(),G=o("blockquote"),P=o("ul"),N=o("li"),C=n("\"It doesn't work at all, my children can't connect to the online class !\""),B=r(),D=o("li"),M=n("\"We're very sorry about that it's an exceptional situation, we're working on the problem with our tech team and will keep you posted.\""),V=r(),z=o("p"),U=n('It is the kind of tweet & LinkedIn messages that have exploded during those recent COVID-times. \n      Indeed, online services, especially meeting utilities or edtech programs, had to face a particularly sustained usage, enduring a unplanned and lasting peak load. \n      I\'ve seen only a few able to maintain an acceptable quality of service (at least, Slack and Zoom have shined with their professionnalism for what I could see), \n      the bigger part having to establish a connection queue for its clients, or even to shutdown their entire service for an endless "maintenance".'),W=r(),H=o("p"),j=n("Even being comprehensive, when facing an online service availability problem, we're very quick to change. \n      After all why shouldn't we benefit for the plethora of offering at our disposal? \n      And after the crisis has passed, it's highly expected that we'll see no reason to change, no reason to go back to the initial fancy startup product we were using at the origin.\n      For a startup that's a lot of clients lost, maybe enough to not be able to start the traction back. Terrible death for a business, another virus victim."),$=r(),_=o("p"),F=n("But üßê"),Y=r(),Z=o("ul"),Q=o("li"),K=o("strong"),J=n("Couldn't those businesses have anticipated more?"),X=r(),ee=o("li"),ae=o("strong"),te=n("Couldn't they have a stronger tech at the origin, exceptional event or not?"),oe=r(),re=o("li"),ne=o("strong"),se=n("Once facing the problem, couldn't they adapt better and faster?"),ie=r(),le=o("h1"),ce=o("a"),he=n("# The scaling maturity model"),ue=r(),pe=o("div"),fe=o("img"),ye=r(),me=o("p"),ve=n('First, I want to introduce what I will call a company "scaling maturity". \n      Scaling is the art of adapt (automatically of not) your tech stack to handle the incoming demand. \n      And to be fair '),be=o("strong"),we=n("Zoom and Slack"),Ee=n(" are far more mature companies than (for example) recently-born edtech startups."),ke=o("br"),Ie=n("\n      Let's analyze them using the scaling maturity model."),Te=r(),xe=o("p"),Se=o("strong"),Re=n("1 - Nominal usage load:"),Le=n(" Slack or Zoom already had a big traffic before, the peak represents a smaller percentage of their total nominal traffic compared to a startup for which it is maybe 100 or 1000 times bigger than usual."),Oe=o("br"),Ae=r(),qe=o("strong"),Ge=n("2 - product maturity:"),Pe=n(" They've had time to know the specificity of their usage, the way the data is accessed, their systems points of failure, etc..."),Ne=o("br"),Ce=r(),Be=o("strong"),De=n("3 - technical skills:"),Me=n(" They probably have a bigger and more experienced tech team."),Ve=r(),ze=o("p"),Ue=n("To synthetize, they know a lot about how their product is used and where they are going, and so know a lot about where to focus, and what kind of effort they need to do to adapt to the extra demand. Plus their current architecture can already sustain some load."),We=r(),He=o("p"),je=n("On the other side, young online services were just overflowed, calling for help, trying desperately to find solutions to shard and replicate their existing relational databases (more on that later)."),$e=o("br"),_e=n("\n      I'll take an hypothetical example of an "),Fe=o("strong"),Ye=n("edtech startup"),Ze=n(" offering innovative online class services"),Qe=r(),Ke=o("p"),Je=o("strong"),Xe=n("1 - Nominal usage load:"),ea=n(" Some clients like what they do, it's the future, they believe in their capability to grow and propose more features with time. \n      So there is a light load for now and a steady growth expected, they've opted for several cheap OVH servers."),aa=o("br"),ta=r(),oa=o("strong"),ra=n("2 - product maturity:"),na=n(" It's basically innovative education R&D so they have a very young product."),sa=o("br"),ia=r(),la=o("strong"),ca=n("3 - technical skills:"),ha=n(" Interns, probably young employees, sometimes founder-made prototypes. At this point salaries weigh a lot..."),da=r(),ua=o("p"),pa=n("I'll make a preliminary conclusion to the first question: businesses couldn't have anticipated and even, for the smaller ones, wasn't expected to have...\n      Indeed, if one wants to design a product with \"infinite\" (or easy to add) scaling from scratch, this will cost him a lot of "),fa=o("strong"),ga=n("money and time"),ya=n(". \n      Two scarse resources you rationnaly prefer to invest in other things when you're a small business (finding product-market fit, adding features, growing, ...)"),ma=r(),va=o("blockquote"),ba=o("div"),wa=o("div"),Ea=o("img"),Ia=r(),Ta=o("div"),xa=n("Covid-19 is a very good example of a "),Sa=o("a"),Ra=n("black swan"),La=n(" event.\n        An event that is very rare, has massive implications, and so for which companies haven't planned for."),Oa=o("br"),Aa=n('\n        Indeed, this point is pretty obvious. We\'ll call it the "bird pause" üòâ'),qa=r(),Ga=o("p"),Pa=n("I've recently talked with several young edtech companies looking urgently for solutions.\n      They were facing the same issue: their "),Na=o("strong"),Ca=n("relational database could not scale anymore"),Ba=n(" (mysql or postgres). \n      They were trying to add cache, pop new replica nodes, refactoring their apps and services, and their final blocker was the database...\n      The only remaining solution was to "),Da=o("strong"),Ma=n("scale writes horizontally"),Va=n(" (to shard). So they were looking for some smart proxy solutions to put in front \n      allowing the database to scale seamlessly. Not that straightforward though... And not that cheap. "),za=o("br"),Ua=n("\n      And I don't even talk about managing the "),Wa=o("strong"),Ha=n("migration"),ja=n(" in that context!"),$a=o("br"),_a=r(),Fa=o("p"),Ya=n("To have an idea about how hard it is to shard an existing database I would say that the more "),Za=o("em"),Qa=n("complex and global"),Ka=n(" querying you have in place (like cross-accounts data aggregation)\n      the more "),Ja=o("em"),Xa=n("smart and expensive"),et=n(" the front proxy will have to be. It goes from a quite simple hash-distribution routing, to a very complex (and hard-to-scale too) query planner."),at=r(),tt=o("p"),ot=n("In light of the scaling maturity model, it's quite clear we can't blame them for not having the scaling mechanisms in place before, \n      but at least they could have planned better for their "),rt=o("strong"),nt=n("next scaling step"),st=n("."),it=r(),lt=o("h1"),ct=o("a"),ht=n("# Then... how to scale efficiently as a startup?"),ut=r(),pt=o("p"),ft=n('We can deconstruct first what is to be "scaled"'),gt=r(),yt=o("ul"),mt=o("li"),vt=o("strong"),bt=n("servers capacity"),wt=n(": costs will force you to dimension correctly their size (cpu / ram / storage). They can be physical, virtual, or containers."),Et=r(),kt=o("li"),It=o("strong"),Tt=n("data access patterns"),xt=n(": know your usage, avoid shared state and global querying, prefer immutability."),St=r(),Rt=o("li"),Lt=o("strong"),Ot=n("human intervention & maintenance"),At=n(': "the more you automate, the faster you iterate" (Github, CI/CD, terraform, ...).'),qt=r(),Gt=o("li"),Pt=o("strong"),Nt=n("code refactoring"),Ct=n(": to scale ofter means pre-compute things, use smart caching, more synchronization, all of this has to be coded and maintained at some point."),Bt=r(),Dt=o("p"),Mt=o("em"),Vt=n("Note: if your product does not have any real traction yet, you probably shouldn't think about this at all for now, a good old MVC prototype with whatever tech you already know will do the job."),zt=r(),Ut=o("p"),Wt=n("If you already have some usage, and have a first idea of where your business is going, then there are several possibilities. \n    If you have at your disposal a strong technical founder, he probably already knows what to do.\n    Otherwise, especially if you did get some founding, it would be a good idea to get someone experimented enough helping you setup the infrastructure at the beginning."),Ht=r(),jt=o("p"),$t=n("Let's explore then two different strategies"),_t=r(),Ft=o("h2"),Yt=n("The infinite scaling strategy"),Zt=r(),Qt=o("p"),Kt=n("Well I prefer to immediately debunk the myth, it's theoretically possible to "),Jt=o("strong"),Xt=n("approach"),eo=n(" such an architecture but it will be very expensive (in time and money _ again things you don't really have as a startup), and possibly quite rigid."),ao=o("br"),to=n("\n      The key here would be to use a lot of high level managed services who run on giant cloud infrastructures. \n      The services choosen should be 100% dynamic, I mean scale transparently: you shouldn't have to manage any physical nodes directly.\n      They better have included and transparent replication (to scale reads) and sharding capabilities (to scale writes) and be able to be geographically dispatched in several regions on the planet."),oo=o("br"),ro=r(),no=o("p"),so=n("Here some managed services examples:"),io=r(),lo=o("ul"),co=o("li"),ho=n("Relational datastore: Google cloud spanner"),uo=r(),po=o("li"),fo=n("NoSQL real time sync datastore: Google firestore"),go=r(),yo=o("li"),mo=n("Replicated cache: AWS Elasticache"),vo=r(),bo=o("li"),wo=n("Distributed File storage: AWS S3"),Eo=r(),ko=o("li"),Io=n("Data streaming: Google pubsub"),To=r(),xo=o("li"),So=n("Columnar-storage (optimized for aggregation) Data lake: Google Bigquery"),Ro=r(),Lo=o("p"),Oo=o("em"),Ao=n("Yes, that's a lot of GCP services, to be honest they are ahead..!"),qo=r(),Go=o("div"),Po=o("img"),Co=r(),Bo=o("em"),Do=n("Actually I have to nuance the curve a bit:"),Mo=r(),Vo=o("ul"),zo=o("li"),Uo=n("Price is actually super low at the very beginning: services often offer free plan for a limited volume or during a limited period"),Wo=r(),Ho=o("li"),jo=n("On the other side, costs can decrease when you reach a big volume because of degressive pricing, or by using provider specific cost optimization techniques"),$o=r(),_o=o("h2"),Fo=n("The step by step scaling strategy"),Yo=r(),Zo=o("div"),Qo=o("img"),Jo=r(),Xo=o("p"),er=n("This is the usual and probably the most efficient strategy, you do with what you have at first (skills, people, ...), but you always stay a step ahead, \n      you are conscious about what your system points of failure are, and how to resolve them. You plan carefully for \n      the next system migrations. This requires specifically:"),ar=r(),tr=o("ul"),or=o("li"),rr=n("To develop a strong "),nr=o("strong"),sr=n("monitoring and alerting pipeline"),ir=n(". You have plenty of tools to do that easily nowadays."),lr=r(),cr=o("li"),hr=n("To "),dr=o("strong"),ur=n("test every migration"),pr=n(" before. The more the system is distributed, the harder the problems are predictable. It's easier to just test it."),fr=r(),gr=o("p"),yr=n("As examples, the scaling next step could be:"),mr=r(),vr=o("ul"),br=o("li"),wr=n("Shard the database or the streaming pipeline"),Er=r(),kr=o("li"),Ir=n("Introduce automatic scaling of your HTTP services"),Tr=r(),xr=o("li"),Sr=n("Refactor your application to isolate your data in silos, introduce some kind of load balancing, and replicate parts of your system"),Rr=r(),Lr=o("p"),Or=n("The core principle is to be cost efficient and smart: to scale efficiently you have to scale in the right proportion and at the right time, too soon and it will cost you too much, too late and you'll loose some quality of service... \n      And this is why having a good feedback (automated) on your current architecture is a real plus."),Ar=o("br"),qr=n("\n      Clouds often offer pre-activated monitoring metrics, \n      for example if you use AWS Beanstalk environments for your web services it provides you automatically the following ones:"),Gr=r(),Pr=o("p"),Nr=o("ul"),Cr=o("li"),Br=n("requests count"),Dr=r(),Mr=o("li"),Vr=n("average latency"),zr=r(),Ur=o("li"),Wr=n("load"),Hr=r(),jr=o("li"),$r=n("CPU"),_r=r(),Fr=o("li"),Yr=n("network in/out"),Zr=r(),Qr=o("li"),Kr=n("..."),Jr=r(),Xr=o("p"),en=n("It is super fast then to visualize in dashboards, to enable alerting, or even activate auto-scaling based on CPU percentage, or network usage...\n    And you have the tools now to scale your web services correctly. After all, more knowledge at the beginning means better decisions at the end."),an=r(),tn=o("p"),on=n("Of course, smart scaling is specific scaling, so every case has a different story..! (databases, queues, pubsubs, data analytics, ...)."),rn=r(),nn=o("p"),sn=n("To conclude, the right solution probably lies in between the two strategies. It depends on your budget, the technical complexity of your product, and the skills you have at your disposal..."),ln=o("br"),cn=n("\n      At least I hope you have new ideas now about how to better anticipate scale !"),hn=r(),dn=o("br"),un=r(),pn=o("p"),fn=o("strong"),gn=n("Scale safe üëã"),yn=o("br"),mn=n("\n      By the way if you have scaling needs / specific questions, "),vn=o("a"),bn=n("I'd be happy to help"),wn=r(),En=o("br"),kn=r(),In=o("div"),this.h()},l(a){const o=s('[data-svelte="svelte-as7c4a"]',document.head);t=i(o,"LINK",{rel:!0,href:!0}),m=i(o,"META",{property:!0,content:!0}),b=i(o,"META",{property:!0,content:!0}),w=i(o,"META",{name:!0,content:!0}),E=i(o,"META",{property:!0,content:!0}),k=i(o,"META",{property:!0,content:!0}),I=i(o,"META",{property:!0,content:!0}),o.forEach(l),T=c(a),x=i(a,"SECTION",{class:!0});var r=h(x);S=i(r,"DIV",{class:!0});var n=h(S);R=i(n,"DIV",{class:!0});var u=h(R);L=i(u,"DIV",{class:!0});var p=h(L);O=i(p,"H1",{class:!0,style:!0});var f=h(O);A=d(f,e[0]),f.forEach(l),q=c(p),G=i(p,"BLOCKQUOTE",{});var g=h(G);P=i(g,"UL",{});var y=h(P);N=i(y,"LI",{});var v=h(N);C=d(v,"\"It doesn't work at all, my children can't connect to the online class !\""),v.forEach(l),B=c(y),D=i(y,"LI",{});var de=h(D);M=d(de,"\"We're very sorry about that it's an exceptional situation, we're working on the problem with our tech team and will keep you posted.\""),de.forEach(l),y.forEach(l),g.forEach(l),V=c(p),z=i(p,"P",{});var ge=h(z);U=d(ge,'It is the kind of tweet & LinkedIn messages that have exploded during those recent COVID-times. \n      Indeed, online services, especially meeting utilities or edtech programs, had to face a particularly sustained usage, enduring a unplanned and lasting peak load. \n      I\'ve seen only a few able to maintain an acceptable quality of service (at least, Slack and Zoom have shined with their professionnalism for what I could see), \n      the bigger part having to establish a connection queue for its clients, or even to shutdown their entire service for an endless "maintenance".'),ge.forEach(l),W=c(p),H=i(p,"P",{});var ka=h(H);j=d(ka,"Even being comprehensive, when facing an online service availability problem, we're very quick to change. \n      After all why shouldn't we benefit for the plethora of offering at our disposal? \n      And after the crisis has passed, it's highly expected that we'll see no reason to change, no reason to go back to the initial fancy startup product we were using at the origin.\n      For a startup that's a lot of clients lost, maybe enough to not be able to start the traction back. Terrible death for a business, another virus victim."),ka.forEach(l),$=c(p),_=i(p,"P",{});var dt=h(_);F=d(dt,"But üßê"),dt.forEach(l),Y=c(p),Z=i(p,"UL",{});var No=h(Z);Q=i(No,"LI",{});var Ko=h(Q);K=i(Ko,"STRONG",{});var Tn=h(K);J=d(Tn,"Couldn't those businesses have anticipated more?"),Tn.forEach(l),Ko.forEach(l),X=c(No),ee=i(No,"LI",{});var xn=h(ee);ae=i(xn,"STRONG",{});var Sn=h(ae);te=d(Sn,"Couldn't they have a stronger tech at the origin, exceptional event or not?"),Sn.forEach(l),xn.forEach(l),oe=c(No),re=i(No,"LI",{});var Rn=h(re);ne=i(Rn,"STRONG",{});var Ln=h(ne);se=d(Ln,"Once facing the problem, couldn't they adapt better and faster?"),Ln.forEach(l),Rn.forEach(l),No.forEach(l),ie=c(p),le=i(p,"H1",{class:!0});var On=h(le);ce=i(On,"A",{id:!0,href:!0});var An=h(ce);he=d(An,"# The scaling maturity model"),An.forEach(l),On.forEach(l),ue=c(p),pe=i(p,"DIV",{style:!0});var qn=h(pe);fe=i(qn,"IMG",{src:!0,class:!0}),qn.forEach(l),ye=c(p),me=i(p,"P",{});var Gn=h(me);ve=d(Gn,'First, I want to introduce what I will call a company "scaling maturity". \n      Scaling is the art of adapt (automatically of not) your tech stack to handle the incoming demand. \n      And to be fair '),be=i(Gn,"STRONG",{});var Pn=h(be);we=d(Pn,"Zoom and Slack"),Pn.forEach(l),Ee=d(Gn," are far more mature companies than (for example) recently-born edtech startups."),ke=i(Gn,"BR",{}),Ie=d(Gn,"\n      Let's analyze them using the scaling maturity model."),Gn.forEach(l),Te=c(p),xe=i(p,"P",{});var Nn=h(xe);Se=i(Nn,"STRONG",{});var Cn=h(Se);Re=d(Cn,"1 - Nominal usage load:"),Cn.forEach(l),Le=d(Nn," Slack or Zoom already had a big traffic before, the peak represents a smaller percentage of their total nominal traffic compared to a startup for which it is maybe 100 or 1000 times bigger than usual."),Oe=i(Nn,"BR",{}),Ae=c(Nn),qe=i(Nn,"STRONG",{});var Bn=h(qe);Ge=d(Bn,"2 - product maturity:"),Bn.forEach(l),Pe=d(Nn," They've had time to know the specificity of their usage, the way the data is accessed, their systems points of failure, etc..."),Ne=i(Nn,"BR",{}),Ce=c(Nn),Be=i(Nn,"STRONG",{});var Dn=h(Be);De=d(Dn,"3 - technical skills:"),Dn.forEach(l),Me=d(Nn," They probably have a bigger and more experienced tech team."),Nn.forEach(l),Ve=c(p),ze=i(p,"P",{});var Mn=h(ze);Ue=d(Mn,"To synthetize, they know a lot about how their product is used and where they are going, and so know a lot about where to focus, and what kind of effort they need to do to adapt to the extra demand. Plus their current architecture can already sustain some load."),Mn.forEach(l),We=c(p),He=i(p,"P",{});var Vn=h(He);je=d(Vn,"On the other side, young online services were just overflowed, calling for help, trying desperately to find solutions to shard and replicate their existing relational databases (more on that later)."),$e=i(Vn,"BR",{}),_e=d(Vn,"\n      I'll take an hypothetical example of an "),Fe=i(Vn,"STRONG",{});var zn=h(Fe);Ye=d(zn,"edtech startup"),zn.forEach(l),Ze=d(Vn," offering innovative online class services"),Vn.forEach(l),Qe=c(p),Ke=i(p,"P",{});var Un=h(Ke);Je=i(Un,"STRONG",{});var Wn=h(Je);Xe=d(Wn,"1 - Nominal usage load:"),Wn.forEach(l),ea=d(Un," Some clients like what they do, it's the future, they believe in their capability to grow and propose more features with time. \n      So there is a light load for now and a steady growth expected, they've opted for several cheap OVH servers."),aa=i(Un,"BR",{}),ta=c(Un),oa=i(Un,"STRONG",{});var Hn=h(oa);ra=d(Hn,"2 - product maturity:"),Hn.forEach(l),na=d(Un," It's basically innovative education R&D so they have a very young product."),sa=i(Un,"BR",{}),ia=c(Un),la=i(Un,"STRONG",{});var jn=h(la);ca=d(jn,"3 - technical skills:"),jn.forEach(l),ha=d(Un," Interns, probably young employees, sometimes founder-made prototypes. At this point salaries weigh a lot..."),Un.forEach(l),da=c(p),ua=i(p,"P",{});var $n=h(ua);pa=d($n,"I'll make a preliminary conclusion to the first question: businesses couldn't have anticipated and even, for the smaller ones, wasn't expected to have...\n      Indeed, if one wants to design a product with \"infinite\" (or easy to add) scaling from scratch, this will cost him a lot of "),fa=i($n,"STRONG",{});var _n=h(fa);ga=d(_n,"money and time"),_n.forEach(l),ya=d($n,". \n      Two scarse resources you rationnaly prefer to invest in other things when you're a small business (finding product-market fit, adding features, growing, ...)"),$n.forEach(l),ma=c(p),va=i(p,"BLOCKQUOTE",{});var Fn=h(va);ba=i(Fn,"DIV",{class:!0});var Yn=h(ba);wa=i(Yn,"DIV",{class:!0});var Zn=h(wa);Ea=i(Zn,"IMG",{alt:!0,src:!0}),Zn.forEach(l),Ia=c(Yn),Ta=i(Yn,"DIV",{class:!0});var Qn=h(Ta);xa=d(Qn,"Covid-19 is a very good example of a "),Sa=i(Qn,"A",{href:!0,target:!0});var Kn=h(Sa);Ra=d(Kn,"black swan"),Kn.forEach(l),La=d(Qn," event.\n        An event that is very rare, has massive implications, and so for which companies haven't planned for."),Oa=i(Qn,"BR",{}),Aa=d(Qn,'\n        Indeed, this point is pretty obvious. We\'ll call it the "bird pause" üòâ'),Qn.forEach(l),Yn.forEach(l),Fn.forEach(l),qa=c(p),Ga=i(p,"P",{});var Jn=h(Ga);Pa=d(Jn,"I've recently talked with several young edtech companies looking urgently for solutions.\n      They were facing the same issue: their "),Na=i(Jn,"STRONG",{});var Xn=h(Na);Ca=d(Xn,"relational database could not scale anymore"),Xn.forEach(l),Ba=d(Jn," (mysql or postgres). \n      They were trying to add cache, pop new replica nodes, refactoring their apps and services, and their final blocker was the database...\n      The only remaining solution was to "),Da=i(Jn,"STRONG",{});var es=h(Da);Ma=d(es,"scale writes horizontally"),es.forEach(l),Va=d(Jn," (to shard). So they were looking for some smart proxy solutions to put in front \n      allowing the database to scale seamlessly. Not that straightforward though... And not that cheap. "),za=i(Jn,"BR",{}),Ua=d(Jn,"\n      And I don't even talk about managing the "),Wa=i(Jn,"STRONG",{});var as=h(Wa);Ha=d(as,"migration"),as.forEach(l),ja=d(Jn," in that context!"),$a=i(Jn,"BR",{}),Jn.forEach(l),_a=c(p),Fa=i(p,"P",{});var ts=h(Fa);Ya=d(ts,"To have an idea about how hard it is to shard an existing database I would say that the more "),Za=i(ts,"EM",{});var os=h(Za);Qa=d(os,"complex and global"),os.forEach(l),Ka=d(ts," querying you have in place (like cross-accounts data aggregation)\n      the more "),Ja=i(ts,"EM",{});var rs=h(Ja);Xa=d(rs,"smart and expensive"),rs.forEach(l),et=d(ts," the front proxy will have to be. It goes from a quite simple hash-distribution routing, to a very complex (and hard-to-scale too) query planner."),ts.forEach(l),at=c(p),tt=i(p,"P",{});var ns=h(tt);ot=d(ns,"In light of the scaling maturity model, it's quite clear we can't blame them for not having the scaling mechanisms in place before, \n      but at least they could have planned better for their "),rt=i(ns,"STRONG",{});var ss=h(rt);nt=d(ss,"next scaling step"),ss.forEach(l),st=d(ns,"."),ns.forEach(l),it=c(p),lt=i(p,"H1",{class:!0});var is=h(lt);ct=i(is,"A",{id:!0,href:!0});var ls=h(ct);ht=d(ls,"# Then... how to scale efficiently as a startup?"),ls.forEach(l),is.forEach(l),ut=c(p),pt=i(p,"P",{});var cs=h(pt);ft=d(cs,'We can deconstruct first what is to be "scaled"'),cs.forEach(l),gt=c(p),yt=i(p,"UL",{});var hs=h(yt);mt=i(hs,"LI",{});var ds=h(mt);vt=i(ds,"STRONG",{});var us=h(vt);bt=d(us,"servers capacity"),us.forEach(l),wt=d(ds,": costs will force you to dimension correctly their size (cpu / ram / storage). They can be physical, virtual, or containers."),ds.forEach(l),Et=c(hs),kt=i(hs,"LI",{});var ps=h(kt);It=i(ps,"STRONG",{});var fs=h(It);Tt=d(fs,"data access patterns"),fs.forEach(l),xt=d(ps,": know your usage, avoid shared state and global querying, prefer immutability."),ps.forEach(l),St=c(hs),Rt=i(hs,"LI",{});var gs=h(Rt);Lt=i(gs,"STRONG",{});var ys=h(Lt);Ot=d(ys,"human intervention & maintenance"),ys.forEach(l),At=d(gs,': "the more you automate, the faster you iterate" (Github, CI/CD, terraform, ...).'),gs.forEach(l),qt=c(hs),Gt=i(hs,"LI",{});var ms=h(Gt);Pt=i(ms,"STRONG",{});var vs=h(Pt);Nt=d(vs,"code refactoring"),vs.forEach(l),Ct=d(ms,": to scale ofter means pre-compute things, use smart caching, more synchronization, all of this has to be coded and maintained at some point."),ms.forEach(l),hs.forEach(l),Bt=c(p),Dt=i(p,"P",{});var bs=h(Dt);Mt=i(bs,"EM",{});var ws=h(Mt);Vt=d(ws,"Note: if your product does not have any real traction yet, you probably shouldn't think about this at all for now, a good old MVC prototype with whatever tech you already know will do the job."),ws.forEach(l),bs.forEach(l),zt=c(p),Ut=i(p,"P",{});var Es=h(Ut);Wt=d(Es,"If you already have some usage, and have a first idea of where your business is going, then there are several possibilities. \n    If you have at your disposal a strong technical founder, he probably already knows what to do.\n    Otherwise, especially if you did get some founding, it would be a good idea to get someone experimented enough helping you setup the infrastructure at the beginning."),Es.forEach(l),Ht=c(p),jt=i(p,"P",{});var ks=h(jt);$t=d(ks,"Let's explore then two different strategies"),ks.forEach(l),_t=c(p),Ft=i(p,"H2",{class:!0});var Is=h(Ft);Yt=d(Is,"The infinite scaling strategy"),Is.forEach(l),Zt=c(p),Qt=i(p,"P",{});var Ts=h(Qt);Kt=d(Ts,"Well I prefer to immediately debunk the myth, it's theoretically possible to "),Jt=i(Ts,"STRONG",{});var xs=h(Jt);Xt=d(xs,"approach"),xs.forEach(l),eo=d(Ts," such an architecture but it will be very expensive (in time and money _ again things you don't really have as a startup), and possibly quite rigid."),ao=i(Ts,"BR",{}),to=d(Ts,"\n      The key here would be to use a lot of high level managed services who run on giant cloud infrastructures. \n      The services choosen should be 100% dynamic, I mean scale transparently: you shouldn't have to manage any physical nodes directly.\n      They better have included and transparent replication (to scale reads) and sharding capabilities (to scale writes) and be able to be geographically dispatched in several regions on the planet."),oo=i(Ts,"BR",{}),Ts.forEach(l),ro=c(p),no=i(p,"P",{});var Ss=h(no);so=d(Ss,"Here some managed services examples:"),Ss.forEach(l),io=c(p),lo=i(p,"UL",{});var Rs=h(lo);co=i(Rs,"LI",{});var Ls=h(co);ho=d(Ls,"Relational datastore: Google cloud spanner"),Ls.forEach(l),uo=c(Rs),po=i(Rs,"LI",{});var Os=h(po);fo=d(Os,"NoSQL real time sync datastore: Google firestore"),Os.forEach(l),go=c(Rs),yo=i(Rs,"LI",{});var As=h(yo);mo=d(As,"Replicated cache: AWS Elasticache"),As.forEach(l),vo=c(Rs),bo=i(Rs,"LI",{});var qs=h(bo);wo=d(qs,"Distributed File storage: AWS S3"),qs.forEach(l),Eo=c(Rs),ko=i(Rs,"LI",{});var Gs=h(ko);Io=d(Gs,"Data streaming: Google pubsub"),Gs.forEach(l),To=c(Rs),xo=i(Rs,"LI",{});var Ps=h(xo);So=d(Ps,"Columnar-storage (optimized for aggregation) Data lake: Google Bigquery"),Ps.forEach(l),Rs.forEach(l),Ro=c(p),Lo=i(p,"P",{});var Ns=h(Lo);Oo=i(Ns,"EM",{});var Cs=h(Oo);Ao=d(Cs,"Yes, that's a lot of GCP services, to be honest they are ahead..!"),Cs.forEach(l),Ns.forEach(l),qo=c(p),Go=i(p,"DIV",{style:!0});var Bs=h(Go);Po=i(Bs,"IMG",{src:!0,class:!0}),Bs.forEach(l),Co=c(p),Bo=i(p,"EM",{});var Ds=h(Bo);Do=d(Ds,"Actually I have to nuance the curve a bit:"),Ds.forEach(l),Mo=c(p),Vo=i(p,"UL",{});var Ms=h(Vo);zo=i(Ms,"LI",{});var Vs=h(zo);Uo=d(Vs,"Price is actually super low at the very beginning: services often offer free plan for a limited volume or during a limited period"),Vs.forEach(l),Wo=c(Ms),Ho=i(Ms,"LI",{});var zs=h(Ho);jo=d(zs,"On the other side, costs can decrease when you reach a big volume because of degressive pricing, or by using provider specific cost optimization techniques"),zs.forEach(l),Ms.forEach(l),$o=c(p),_o=i(p,"H2",{class:!0});var Us=h(_o);Fo=d(Us,"The step by step scaling strategy"),Us.forEach(l),Yo=c(p),Zo=i(p,"DIV",{style:!0});var Ws=h(Zo);Qo=i(Ws,"IMG",{src:!0,class:!0}),Ws.forEach(l),Jo=c(p),Xo=i(p,"P",{});var Hs=h(Xo);er=d(Hs,"This is the usual and probably the most efficient strategy, you do with what you have at first (skills, people, ...), but you always stay a step ahead, \n      you are conscious about what your system points of failure are, and how to resolve them. You plan carefully for \n      the next system migrations. This requires specifically:"),Hs.forEach(l),ar=c(p),tr=i(p,"UL",{});var js=h(tr);or=i(js,"LI",{});var $s=h(or);rr=d($s,"To develop a strong "),nr=i($s,"STRONG",{});var _s=h(nr);sr=d(_s,"monitoring and alerting pipeline"),_s.forEach(l),ir=d($s,". You have plenty of tools to do that easily nowadays."),$s.forEach(l),lr=c(js),cr=i(js,"LI",{});var Fs=h(cr);hr=d(Fs,"To "),dr=i(Fs,"STRONG",{});var Ys=h(dr);ur=d(Ys,"test every migration"),Ys.forEach(l),pr=d(Fs," before. The more the system is distributed, the harder the problems are predictable. It's easier to just test it."),Fs.forEach(l),js.forEach(l),fr=c(p),gr=i(p,"P",{});var Zs=h(gr);yr=d(Zs,"As examples, the scaling next step could be:"),Zs.forEach(l),mr=c(p),vr=i(p,"UL",{});var Qs=h(vr);br=i(Qs,"LI",{});var Ks=h(br);wr=d(Ks,"Shard the database or the streaming pipeline"),Ks.forEach(l),Er=c(Qs),kr=i(Qs,"LI",{});var Js=h(kr);Ir=d(Js,"Introduce automatic scaling of your HTTP services"),Js.forEach(l),Tr=c(Qs),xr=i(Qs,"LI",{});var Xs=h(xr);Sr=d(Xs,"Refactor your application to isolate your data in silos, introduce some kind of load balancing, and replicate parts of your system"),Xs.forEach(l),Qs.forEach(l),Rr=c(p),Lr=i(p,"P",{});var ei=h(Lr);Or=d(ei,"The core principle is to be cost efficient and smart: to scale efficiently you have to scale in the right proportion and at the right time, too soon and it will cost you too much, too late and you'll loose some quality of service... \n      And this is why having a good feedback (automated) on your current architecture is a real plus."),Ar=i(ei,"BR",{}),qr=d(ei,"\n      Clouds often offer pre-activated monitoring metrics, \n      for example if you use AWS Beanstalk environments for your web services it provides you automatically the following ones:"),ei.forEach(l),Gr=c(p),Pr=i(p,"P",{}),h(Pr).forEach(l),Nr=i(p,"UL",{});var ai=h(Nr);Cr=i(ai,"LI",{});var ti=h(Cr);Br=d(ti,"requests count"),ti.forEach(l),Dr=c(ai),Mr=i(ai,"LI",{});var oi=h(Mr);Vr=d(oi,"average latency"),oi.forEach(l),zr=c(ai),Ur=i(ai,"LI",{});var ri=h(Ur);Wr=d(ri,"load"),ri.forEach(l),Hr=c(ai),jr=i(ai,"LI",{});var ni=h(jr);$r=d(ni,"CPU"),ni.forEach(l),_r=c(ai),Fr=i(ai,"LI",{});var si=h(Fr);Yr=d(si,"network in/out"),si.forEach(l),Zr=c(ai),Qr=i(ai,"LI",{});var ii=h(Qr);Kr=d(ii,"..."),ii.forEach(l),ai.forEach(l),Jr=c(p),Xr=i(p,"P",{});var li=h(Xr);en=d(li,"It is super fast then to visualize in dashboards, to enable alerting, or even activate auto-scaling based on CPU percentage, or network usage...\n    And you have the tools now to scale your web services correctly. After all, more knowledge at the beginning means better decisions at the end."),li.forEach(l),an=c(p),tn=i(p,"P",{});var ci=h(tn);on=d(ci,"Of course, smart scaling is specific scaling, so every case has a different story..! (databases, queues, pubsubs, data analytics, ...)."),ci.forEach(l),rn=c(p),nn=i(p,"P",{});var hi=h(nn);sn=d(hi,"To conclude, the right solution probably lies in between the two strategies. It depends on your budget, the technical complexity of your product, and the skills you have at your disposal..."),ln=i(hi,"BR",{}),cn=d(hi,"\n      At least I hope you have new ideas now about how to better anticipate scale !"),hi.forEach(l),hn=c(p),dn=i(p,"BR",{}),un=c(p),pn=i(p,"P",{});var di=h(pn);fn=i(di,"STRONG",{});var ui=h(fn);gn=d(ui,"Scale safe üëã"),ui.forEach(l),yn=i(di,"BR",{}),mn=d(di,"\n      By the way if you have scaling needs / specific questions, "),vn=i(di,"A",{href:!0});var pi=h(vn);bn=d(pi,"I'd be happy to help"),pi.forEach(l),di.forEach(l),wn=c(p),En=i(p,"BR",{}),kn=c(p),In=i(p,"DIV",{id:!0}),h(In).forEach(l),p.forEach(l),u.forEach(l),n.forEach(l),r.forEach(l),this.h()},h(){u(t,"rel","canonical"),u(t,"href",e[3]),u(m,"property","og:title"),u(m,"content",v="@cyppan | "+e[0]),u(b,"property","og:locale"),u(b,"content","en_US"),u(w,"name","description"),u(w,"content",e[1]),u(E,"property","og:description"),u(E,"content",e[1]),u(k,"property","og:url"),u(k,"content",e[3]),u(I,"property","og:site_name"),u(I,"content","@cyppan"),u(O,"class","title is-2"),p(O,"text-align","center"),u(ce,"id","scaling-maturity-model"),u(ce,"href",de=e[2]+"#scaling-maturity-model"),u(le,"class","title is-3 svelte-1ou6gkp"),fe.src!==(ge="/scaling-maturity.png")&&u(fe,"src","/scaling-maturity.png"),u(fe,"class","is-center"),p(pe,"text-align","center"),u(Ea,"alt","black swan Image by Holger Detje from Pixabay"),Ea.src!==(ka="/black-swan.jpg")&&u(Ea,"src","/black-swan.jpg"),u(wa,"class","column is-one-quarter"),u(Sa,"href","https://en.wikipedia.org/wiki/Black_swan_theory"),u(Sa,"target","_blank"),u(Ta,"class","column"),u(ba,"class","columns"),u(ct,"id","scale-efficiently"),u(ct,"href",dt=e[2]+"#scale-efficiently"),u(lt,"class","title is-3 svelte-1ou6gkp"),u(Ft,"class","subtitle is-4 svelte-1ou6gkp"),Po.src!==(No="/dynamic-scaling-curve.png")&&u(Po,"src","/dynamic-scaling-curve.png"),u(Po,"class","is-center"),p(Go,"text-align","center"),u(_o,"class","subtitle is-4 svelte-1ou6gkp"),Qo.src!==(Ko="/static-scaling-curve.png")&&u(Qo,"src","/static-scaling-curve.png"),u(Qo,"class","is-center"),p(Zo,"text-align","center"),u(vn,"href","/"),u(In,"id","disqus_thread"),u(L,"class","container content svelte-1ou6gkp"),u(R,"class","box"),u(S,"class","container svelte-1ou6gkp"),u(x,"class","section")},m(e,a){f(document.head,t),f(document.head,m),f(document.head,b),f(document.head,w),f(document.head,E),f(document.head,k),f(document.head,I),g(e,T,a),g(e,x,a),f(x,S),f(S,R),f(R,L),f(L,O),f(O,A),f(L,q),f(L,G),f(G,P),f(P,N),f(N,C),f(P,B),f(P,D),f(D,M),f(L,V),f(L,z),f(z,U),f(L,W),f(L,H),f(H,j),f(L,$),f(L,_),f(_,F),f(L,Y),f(L,Z),f(Z,Q),f(Q,K),f(K,J),f(Z,X),f(Z,ee),f(ee,ae),f(ae,te),f(Z,oe),f(Z,re),f(re,ne),f(ne,se),f(L,ie),f(L,le),f(le,ce),f(ce,he),f(L,ue),f(L,pe),f(pe,fe),f(L,ye),f(L,me),f(me,ve),f(me,be),f(be,we),f(me,Ee),f(me,ke),f(me,Ie),f(L,Te),f(L,xe),f(xe,Se),f(Se,Re),f(xe,Le),f(xe,Oe),f(xe,Ae),f(xe,qe),f(qe,Ge),f(xe,Pe),f(xe,Ne),f(xe,Ce),f(xe,Be),f(Be,De),f(xe,Me),f(L,Ve),f(L,ze),f(ze,Ue),f(L,We),f(L,He),f(He,je),f(He,$e),f(He,_e),f(He,Fe),f(Fe,Ye),f(He,Ze),f(L,Qe),f(L,Ke),f(Ke,Je),f(Je,Xe),f(Ke,ea),f(Ke,aa),f(Ke,ta),f(Ke,oa),f(oa,ra),f(Ke,na),f(Ke,sa),f(Ke,ia),f(Ke,la),f(la,ca),f(Ke,ha),f(L,da),f(L,ua),f(ua,pa),f(ua,fa),f(fa,ga),f(ua,ya),f(L,ma),f(L,va),f(va,ba),f(ba,wa),f(wa,Ea),f(ba,Ia),f(ba,Ta),f(Ta,xa),f(Ta,Sa),f(Sa,Ra),f(Ta,La),f(Ta,Oa),f(Ta,Aa),f(L,qa),f(L,Ga),f(Ga,Pa),f(Ga,Na),f(Na,Ca),f(Ga,Ba),f(Ga,Da),f(Da,Ma),f(Ga,Va),f(Ga,za),f(Ga,Ua),f(Ga,Wa),f(Wa,Ha),f(Ga,ja),f(Ga,$a),f(L,_a),f(L,Fa),f(Fa,Ya),f(Fa,Za),f(Za,Qa),f(Fa,Ka),f(Fa,Ja),f(Ja,Xa),f(Fa,et),f(L,at),f(L,tt),f(tt,ot),f(tt,rt),f(rt,nt),f(tt,st),f(L,it),f(L,lt),f(lt,ct),f(ct,ht),f(L,ut),f(L,pt),f(pt,ft),f(L,gt),f(L,yt),f(yt,mt),f(mt,vt),f(vt,bt),f(mt,wt),f(yt,Et),f(yt,kt),f(kt,It),f(It,Tt),f(kt,xt),f(yt,St),f(yt,Rt),f(Rt,Lt),f(Lt,Ot),f(Rt,At),f(yt,qt),f(yt,Gt),f(Gt,Pt),f(Pt,Nt),f(Gt,Ct),f(L,Bt),f(L,Dt),f(Dt,Mt),f(Mt,Vt),f(L,zt),f(L,Ut),f(Ut,Wt),f(L,Ht),f(L,jt),f(jt,$t),f(L,_t),f(L,Ft),f(Ft,Yt),f(L,Zt),f(L,Qt),f(Qt,Kt),f(Qt,Jt),f(Jt,Xt),f(Qt,eo),f(Qt,ao),f(Qt,to),f(Qt,oo),f(L,ro),f(L,no),f(no,so),f(L,io),f(L,lo),f(lo,co),f(co,ho),f(lo,uo),f(lo,po),f(po,fo),f(lo,go),f(lo,yo),f(yo,mo),f(lo,vo),f(lo,bo),f(bo,wo),f(lo,Eo),f(lo,ko),f(ko,Io),f(lo,To),f(lo,xo),f(xo,So),f(L,Ro),f(L,Lo),f(Lo,Oo),f(Oo,Ao),f(L,qo),f(L,Go),f(Go,Po),f(L,Co),f(L,Bo),f(Bo,Do),f(L,Mo),f(L,Vo),f(Vo,zo),f(zo,Uo),f(Vo,Wo),f(Vo,Ho),f(Ho,jo),f(L,$o),f(L,_o),f(_o,Fo),f(L,Yo),f(L,Zo),f(Zo,Qo),f(L,Jo),f(L,Xo),f(Xo,er),f(L,ar),f(L,tr),f(tr,or),f(or,rr),f(or,nr),f(nr,sr),f(or,ir),f(tr,lr),f(tr,cr),f(cr,hr),f(cr,dr),f(dr,ur),f(cr,pr),f(L,fr),f(L,gr),f(gr,yr),f(L,mr),f(L,vr),f(vr,br),f(br,wr),f(vr,Er),f(vr,kr),f(kr,Ir),f(vr,Tr),f(vr,xr),f(xr,Sr),f(L,Rr),f(L,Lr),f(Lr,Or),f(Lr,Ar),f(Lr,qr),f(L,Gr),f(L,Pr),f(L,Nr),f(Nr,Cr),f(Cr,Br),f(Nr,Dr),f(Nr,Mr),f(Mr,Vr),f(Nr,zr),f(Nr,Ur),f(Ur,Wr),f(Nr,Hr),f(Nr,jr),f(jr,$r),f(Nr,_r),f(Nr,Fr),f(Fr,Yr),f(Nr,Zr),f(Nr,Qr),f(Qr,Kr),f(L,Jr),f(L,Xr),f(Xr,en),f(L,an),f(L,tn),f(tn,on),f(L,rn),f(L,nn),f(nn,sn),f(nn,ln),f(nn,cn),f(L,hn),f(L,dn),f(L,un),f(L,pn),f(pn,fn),f(fn,gn),f(pn,yn),f(pn,mn),f(pn,vn),f(vn,bn),f(L,wn),f(L,En),f(L,kn),f(L,In)},p(e,[t]){1&t&&a!==(a="\n    @cyppan | "+e[0]+"\n  ")&&(document.title=a)},i:y,o:y,d(e){l(t),l(m),l(b),l(w),l(E),l(k),l(I),e&&l(T),e&&l(x)}}}function v(e,a,t){const o="/blog/en/2020-04-01-scaling-stories-how-startups-failed";return["scaling stories: how startups failed","During COVID-19, online services, especially meeting utilities or edtech programs, had to face a particularly sustained usage, enduring a unplanned and lasting peak load recently. Couldn't those businesses have anticipated more? Couldn't they have a stronger tech at the origin, exceptional event or not?",o,"https://cyppan.me/blog/en/2020-04-01-scaling-stories-how-startups-failed"]}export default class extends e{constructor(e){super(),a(this,e,v,m,t,{title:0,description:1,path:2,url:3})}get title(){return this.$$.ctx[0]}get description(){return this.$$.ctx[1]}get path(){return this.$$.ctx[2]}get url(){return this.$$.ctx[3]}}
