import{S as e,i as a,s as t,e as o,a as r,t as s,q as n,c as i,f as l,d as c,b as h,k as d,g as u,l as p,j as f,h as y,n as g}from"./client.84a562b1.js";function m(e){let a,t,m,v,b,w,E,I,k,T,x,S,R,L,O,A,q,G,P,N,C,B,D,M,V,U,z,W,H,j,$,_,F,Y,Z,Q,K,J,X,ee,ae,te,oe,re,se,ne,ie,le,ce,he,de,ue,pe,fe,ye,ge,me,ve,be,we,Ee,Ie,ke,Te,xe,Se,Re,Le,Oe,Ae,qe,Ge,Pe,Ne,Ce,Be,De,Me,Ve,Ue,ze,We,He,je,$e,_e,Fe,Ye,Ze,Qe,Ke,Je,Xe,ea,aa,ta,oa,ra,sa,na,ia,la,ca,ha,da,ua,pa,fa,ya,ga,ma,va,ba,wa,Ea,Ia,ka,Ta,xa,Sa,Ra,La,Oa,Aa,qa,Ga,Pa,Na,Ca,Ba,Da,Ma,Va,Ua,za,Wa,Ha,ja,$a,_a,Fa,Ya,Za,Qa,Ka,Ja,Xa,et,at,tt,ot,rt,st,nt,it,lt,ct,ht,dt,ut,pt,ft,yt,gt,mt,vt,bt,wt,Et,It,kt,Tt,xt,St,Rt,Lt,Ot,At,qt,Gt,Pt,Nt,Ct,Bt,Dt,Mt,Vt,Ut,zt,Wt,Ht,jt,$t,_t,Ft,Yt,Zt,Qt,Kt,Jt,Xt,eo,ao,to,oo,ro,so,no,io,lo,co,ho,uo,po,fo,yo,go,mo,vo,bo,wo,Eo,Io,ko,To,xo,So,Ro,Lo,Oo,Ao,qo,Go,Po,No,Co,Bo,Do,Mo,Vo,Uo,zo,Wo,Ho,jo,$o,_o,Fo,Yo,Zo,Qo,Ko,Jo,Xo,er,ar,tr,or,rr,sr,nr,ir,lr,cr,hr,dr,ur,pr,fr,yr,gr,mr,vr,br,wr,Er,Ir,kr,Tr,xr,Sr,Rr,Lr,Or,Ar,qr,Gr,Pr,Nr,Cr,Br,Dr,Mr,Vr,Ur,zr,Wr,Hr,jr,$r,_r,Fr,Yr,Zr,Qr,Kr,Jr,Xr,es,as,ts,os,rs,ss,ns,is,ls,cs,hs,ds,us,ps,fs,ys,gs,ms,vs,bs,ws,Es,Is;return document.title=a="\n    @cyppan | "+e[0]+"\n  ",{c(){t=o("link"),m=o("meta"),b=o("meta"),w=o("meta"),E=o("meta"),I=o("meta"),k=o("meta"),T=r(),x=o("section"),S=o("div"),R=o("div"),L=o("div"),O=o("h1"),A=s(e[0]),q=r(),G=o("blockquote"),P=o("ul"),N=o("li"),C=s("\"It doesn't work at all, my children can't connect to the online class !\""),B=r(),D=o("li"),M=s("\"We're very sorry about that it's an exceptional situation, we're working on the problem with our tech team and will keep you posted.\""),V=r(),U=o("p"),z=s('It is the kind of tweet & LinkedIn messages that have exploded during those recent COVID-times. \n      Indeed, online services, especially meeting utilities or edtech programs, had to face a particularly sustained usage, enduring a unplanned and lasting peak load. \n      I\'ve seen only a few able to maintain an acceptable quality of service (at least, Slack and Zoom have shined with their professionnalism for what I could see), \n      the bigger part having to establish a connection queue for its clients, or even to shutdown their entire service for an endless "maintenance".'),W=r(),H=o("p"),j=s("Even being comprehensive, when facing an online service availability problem, we're very quick to change. \n      After all why shouldn't we benefit for the plethora of offering at our disposal? \n      And after the crisis has passed, it's highly expected that we'll see no reason to change, no reason to go back to the initial fancy startup product we were using at the origin.\n      For a startup that's a lot of clients lost, maybe enough to not be able to start the traction back. Terrible death for a business, another virus victim."),$=r(),_=o("p"),F=s("But üßê"),Y=r(),Z=o("ul"),Q=o("li"),K=o("strong"),J=s("Couldn't those businesses have anticipated more?"),X=r(),ee=o("li"),ae=o("strong"),te=s("Couldn't they have a stronger tech at the origin, exceptional event or not?"),oe=r(),re=o("li"),se=o("strong"),ne=s("Once facing the problem, couldn't they adapt better and faster?"),ie=r(),le=o("h1"),ce=o("a"),he=s("# The scaling maturity model"),ue=r(),pe=o("div"),fe=o("img"),ge=r(),me=o("p"),ve=s('First, I want to introduce what I will call a company "scaling maturity". \n      Scaling is the art of adapt (automatically of not) your tech stack to handle the incoming demand. \n      And to be fair '),be=o("strong"),we=s("Zoom and Slack"),Ee=s(" are far more mature companies than (for example) recently-born edtech startups."),Ie=o("br"),ke=s("\n      Let's analyze them using the scaling maturity model."),Te=r(),xe=o("p"),Se=o("strong"),Re=s("1 - Nominal usage load:"),Le=s(" Slack or Zoom already had a big traffic before, the peak represents a smaller percentage of their total nominal traffic compared to a startup for which it is maybe 100 or 1000 times bigger than usual."),Oe=o("br"),Ae=r(),qe=o("strong"),Ge=s("2 - product maturity:"),Pe=s(" They've had time to know the specificity of their usage, the way the data is accessed, their systems points of failure, etc..."),Ne=o("br"),Ce=r(),Be=o("strong"),De=s("3 - technical skills:"),Me=s(" They probably have a bigger and more experienced tech team."),Ve=r(),Ue=o("p"),ze=s("To synthetize, they know a lot about how their product is used and where they are going, and so know a lot about where to focus, and what kind of effort they need to do to adapt to the extra demand. Plus their current architecture can already sustain some load."),We=r(),He=o("p"),je=s("On the other side, young online services were just overflowed, calling for help, trying desperately to find solutions to shard and replicate their existing relational databases (more on that later)."),$e=o("br"),_e=s("\n      I'll take an hypothetical example of an "),Fe=o("strong"),Ye=s("edtech startup"),Ze=s(" offering innovative online class services"),Qe=r(),Ke=o("p"),Je=o("strong"),Xe=s("1 - Nominal usage load:"),ea=s(" Some clients like what they do, it's the future, they believe in their capability to grow and propose more features with time. \n      So there is a light load for now and a steady growth expected, they've opted for several cheap OVH servers."),aa=o("br"),ta=r(),oa=o("strong"),ra=s("2 - product maturity:"),sa=s(" It's basically innovative education R&D so they have a very young product."),na=o("br"),ia=r(),la=o("strong"),ca=s("3 - technical skills:"),ha=s(" Interns, probably young employees, sometimes founder-made prototypes. At this point salaries weigh a lot..."),da=r(),ua=o("p"),pa=s("I'll make a preliminary conclusion to the first question: businesses couldn't have anticipated and even, for the smaller ones, wasn't expected to have...\n      Indeed, if one wants to design a product with \"infinite\" (or easy to add) scaling from scratch, this will cost him a lot of "),fa=o("strong"),ya=s("money and time"),ga=s(". \n      Two scarse resources you rationnaly prefer to invest in other things when you're a small business (finding product-market fit, adding features, growing, ...)"),ma=r(),va=o("blockquote"),ba=o("div"),wa=o("div"),Ea=o("img"),ka=r(),Ta=o("div"),xa=s("Covid-19 is a very good example of a "),Sa=o("a"),Ra=s("black swan"),La=s(" event.\n        An event that is very rare, has massive implications, and so for which companies haven't planned for."),Oa=o("br"),Aa=s('\n        Indeed, this point is pretty obvious. We\'ll call it the "bird pause" üòâ'),qa=r(),Ga=o("p"),Pa=s("I've recently talked with several young edtech companies looking urgently for solutions.\n      They were facing the same issue: their "),Na=o("strong"),Ca=s("relational database could not scale anymore"),Ba=s(" (mysql or postgres). \n      They were trying to add cache, pop new replica nodes, refactoring their apps and services, and their final blocker was the database...\n      The only remaining solution was to "),Da=o("strong"),Ma=s("scale writes horizontally"),Va=s(" (to shard). So they were looking for some smart proxy solutions to put in front \n      allowing the database to scale seamlessly. Not that straightforward though... And not that cheap. "),Ua=o("br"),za=s("\n      And I don't even talk about managing the "),Wa=o("strong"),Ha=s("migration"),ja=s(" in that context!"),$a=o("br"),_a=r(),Fa=o("p"),Ya=s("To have an idea about how hard it is to shard an existing database I would say that the more "),Za=o("em"),Qa=s("complex and global"),Ka=s(" querying you have in place (like cross-accounts data aggregation)\n      the more "),Ja=o("em"),Xa=s("smart and expensive"),et=s(" the front proxy will have to be. It goes from a quite simple hash-distribution routing, to a very complex (and hard-to-scale too) query planner."),at=r(),tt=o("p"),ot=s("In light of the scaling maturity model, it's quite clear we can't blame them for not having the scaling mechanisms in place before, \n      but at least they could have planned better for their "),rt=o("strong"),st=s("next scaling step"),nt=s("."),it=r(),lt=o("h1"),ct=o("a"),ht=s("# Then... how to scale efficiently as a startup?"),ut=r(),pt=o("p"),ft=s('We can deconstruct first what is to be "scaled"'),yt=r(),gt=o("ul"),mt=o("li"),vt=o("strong"),bt=s("servers capacity"),wt=s(": costs will force you to dimension correctly their size (cpu / ram / storage). They can be physical, virtual, or containers."),Et=r(),It=o("li"),kt=o("strong"),Tt=s("data access patterns"),xt=s(": know your usage, avoid shared state and global querying, prefer immutability."),St=r(),Rt=o("li"),Lt=o("strong"),Ot=s("human intervention & maintenance"),At=s(': "the more you automate, the faster you iterate" (Github, CI/CD, terraform, ...).'),qt=r(),Gt=o("li"),Pt=o("strong"),Nt=s("code refactoring"),Ct=s(": to scale ofter means pre-compute things, use smart caching, more synchronization, all of this has to be coded and maintained at some point."),Bt=r(),Dt=o("p"),Mt=o("em"),Vt=s("Note: if your product does not have any real traction yet, you probably shouldn't think about this at all for now, a good old MVC prototype with whatever tech you already know will do the job."),Ut=r(),zt=o("p"),Wt=s("If you already have some usage, and have a first idea of where your business is going, then there are several possibilities. \n    If you have at your disposal a strong technical founder, he probably already knows what to do.\n    Otherwise, especially if you did get some founding, it would be a good idea to get someone experimented enough helping you setup the infrastructure at the beginning."),Ht=r(),jt=o("p"),$t=s("Let's explore then two different strategies"),_t=r(),Ft=o("h2"),Yt=s("The infinite scaling strategy"),Zt=r(),Qt=o("p"),Kt=s("Well I prefer to immediately debunk the myth, it's theoretically possible to "),Jt=o("strong"),Xt=s("approach"),eo=s(" such an architecture but it will be very expensive (in time and money _ again things you don't really have as a startup), and possibly quite rigid."),ao=o("br"),to=s("\n      The key here would be to use a lot of high level managed services who run on giant cloud infrastructures. \n      The services choosen should be 100% dynamic, I mean scale transparently: you shouldn't have to manage any physical nodes directly.\n      They better have included and transparent replication (to scale reads) and sharding capabilities (to scale writes) and be able to be geographically dispatched in several regions on the planet."),oo=o("br"),ro=r(),so=o("p"),no=s("Here some managed services examples:"),io=r(),lo=o("ul"),co=o("li"),ho=s("Relational datastore: Google cloud spanner"),uo=r(),po=o("li"),fo=s("NoSQL real time sync datastore: Google firestore"),yo=r(),go=o("li"),mo=s("Replicated cache: AWS Elasticache"),vo=r(),bo=o("li"),wo=s("Distributed File storage: AWS S3"),Eo=r(),Io=o("li"),ko=s("Data streaming: Google pubsub"),To=r(),xo=o("li"),So=s("Data warehouse: Google Bigquery"),Ro=r(),Lo=o("p"),Oo=o("em"),Ao=s("Yes, that's a lot of GCP services, to be honest they are ahead..!"),qo=r(),Go=o("div"),Po=o("img"),Co=r(),Bo=o("em"),Do=s("Actually I have to nuance the curve a bit:"),Mo=r(),Vo=o("ul"),Uo=o("li"),zo=s("Price is actually super low at the very beginning: services often offer free plan for a limited volume or during a limited period"),Wo=r(),Ho=o("li"),jo=s("On the other side, costs can decrease when you reach a big volume because of degressive pricing, or by using provider specific cost optimization techniques"),$o=r(),_o=o("h2"),Fo=s("The step by step scaling strategy"),Yo=r(),Zo=o("div"),Qo=o("img"),Jo=r(),Xo=o("p"),er=s("This is the usual and probably the most efficient strategy, you do with what you have at first (skills, people, ...), but you always stay a step ahead, \n      you are conscious about what your system points of failure are, and how to resolve them. You plan carefully for \n      the next system migrations. This requires specifically:"),ar=r(),tr=o("ul"),or=o("li"),rr=s("To develop a strong "),sr=o("strong"),nr=s("monitoring and alerting pipeline"),ir=s(". You have plenty of tools to do that easily nowadays."),lr=r(),cr=o("li"),hr=s("To "),dr=o("strong"),ur=s("test every migration"),pr=s(" before. The more the system is distributed, the harder the problems are predictable. It's easier to just test it."),fr=r(),yr=o("p"),gr=s("As examples, the scaling next step could be:"),mr=r(),vr=o("ul"),br=o("li"),wr=s("Shard the database or the streaming pipeline"),Er=r(),Ir=o("li"),kr=s("Introduce automatic scaling of your HTTP services"),Tr=r(),xr=o("li"),Sr=s("Refactor your application to isolate your data in silos, introduce some kind of load balancing, and replicate parts of your system"),Rr=r(),Lr=o("p"),Or=s("The core principle is to be cost efficient and smart: to scale efficiently you have to scale in the right proportion and at the right time, too soon and it will cost you too much, too late and you'll loose some quality of service... \n      And this is why having a good feedback (automated) on your current architecture is a real plus."),Ar=o("br"),qr=s("\n      Clouds often offer pre-activated monitoring metrics, \n      for example if you use AWS Beanstalk environments for your web services it provides you automatically the following ones:"),Gr=r(),Pr=o("p"),Nr=o("ul"),Cr=o("li"),Br=s("requests count"),Dr=r(),Mr=o("li"),Vr=s("average latency"),Ur=r(),zr=o("li"),Wr=s("load"),Hr=r(),jr=o("li"),$r=s("CPU"),_r=r(),Fr=o("li"),Yr=s("network in/out"),Zr=r(),Qr=o("li"),Kr=s("..."),Jr=r(),Xr=o("p"),es=s("It is super fast then to visualize in dashboards, to enable alerting, or even activate auto-scaling based on CPU percentage, or network usage...\n    And you have the tools now to scale your web services correctly. After all, more knowledge at the beginning means better decisions at the end."),as=r(),ts=o("p"),os=s("Of course, smart scaling is specific scaling, so every case has a different story..! (databases, queues, pubsubs, data analytics, ...)."),rs=r(),ss=o("p"),ns=s("To conclude, the right solution probably lies in between the two strategies. It depends on your budget, the technical complexity of your product, and the skills you have at your disposal..."),is=o("br"),ls=s("\n      At least I hope you have new ideas now about how to better anticipate scale !"),cs=r(),hs=o("br"),ds=r(),us=o("p"),ps=o("strong"),fs=s("Scale safe üëã"),ys=o("br"),gs=s("\n      By the way if you have scaling needs / specific questions, "),ms=o("a"),vs=s("I'd be happy to help"),bs=r(),ws=o("br"),Es=r(),Is=o("div"),this.h()},l(a){const o=n('[data-svelte="svelte-as7c4a"]',document.head);t=i(o,"LINK",{rel:!0,href:!0}),m=i(o,"META",{property:!0,content:!0}),b=i(o,"META",{property:!0,content:!0}),w=i(o,"META",{name:!0,content:!0}),E=i(o,"META",{property:!0,content:!0}),I=i(o,"META",{property:!0,content:!0}),k=i(o,"META",{property:!0,content:!0}),o.forEach(l),T=c(a),x=i(a,"SECTION",{class:!0});var r=h(x);S=i(r,"DIV",{class:!0});var s=h(S);R=i(s,"DIV",{class:!0});var u=h(R);L=i(u,"DIV",{class:!0});var p=h(L);O=i(p,"H1",{class:!0,style:!0});var f=h(O);A=d(f,e[0]),f.forEach(l),q=c(p),G=i(p,"BLOCKQUOTE",{});var y=h(G);P=i(y,"UL",{});var g=h(P);N=i(g,"LI",{});var v=h(N);C=d(v,"\"It doesn't work at all, my children can't connect to the online class !\""),v.forEach(l),B=c(g),D=i(g,"LI",{});var de=h(D);M=d(de,"\"We're very sorry about that it's an exceptional situation, we're working on the problem with our tech team and will keep you posted.\""),de.forEach(l),g.forEach(l),y.forEach(l),V=c(p),U=i(p,"P",{});var ye=h(U);z=d(ye,'It is the kind of tweet & LinkedIn messages that have exploded during those recent COVID-times. \n      Indeed, online services, especially meeting utilities or edtech programs, had to face a particularly sustained usage, enduring a unplanned and lasting peak load. \n      I\'ve seen only a few able to maintain an acceptable quality of service (at least, Slack and Zoom have shined with their professionnalism for what I could see), \n      the bigger part having to establish a connection queue for its clients, or even to shutdown their entire service for an endless "maintenance".'),ye.forEach(l),W=c(p),H=i(p,"P",{});var Ia=h(H);j=d(Ia,"Even being comprehensive, when facing an online service availability problem, we're very quick to change. \n      After all why shouldn't we benefit for the plethora of offering at our disposal? \n      And after the crisis has passed, it's highly expected that we'll see no reason to change, no reason to go back to the initial fancy startup product we were using at the origin.\n      For a startup that's a lot of clients lost, maybe enough to not be able to start the traction back. Terrible death for a business, another virus victim."),Ia.forEach(l),$=c(p),_=i(p,"P",{});var dt=h(_);F=d(dt,"But üßê"),dt.forEach(l),Y=c(p),Z=i(p,"UL",{});var No=h(Z);Q=i(No,"LI",{});var Ko=h(Q);K=i(Ko,"STRONG",{});var ks=h(K);J=d(ks,"Couldn't those businesses have anticipated more?"),ks.forEach(l),Ko.forEach(l),X=c(No),ee=i(No,"LI",{});var Ts=h(ee);ae=i(Ts,"STRONG",{});var xs=h(ae);te=d(xs,"Couldn't they have a stronger tech at the origin, exceptional event or not?"),xs.forEach(l),Ts.forEach(l),oe=c(No),re=i(No,"LI",{});var Ss=h(re);se=i(Ss,"STRONG",{});var Rs=h(se);ne=d(Rs,"Once facing the problem, couldn't they adapt better and faster?"),Rs.forEach(l),Ss.forEach(l),No.forEach(l),ie=c(p),le=i(p,"H1",{class:!0});var Ls=h(le);ce=i(Ls,"A",{id:!0,href:!0});var Os=h(ce);he=d(Os,"# The scaling maturity model"),Os.forEach(l),Ls.forEach(l),ue=c(p),pe=i(p,"DIV",{style:!0});var As=h(pe);fe=i(As,"IMG",{src:!0,class:!0}),As.forEach(l),ge=c(p),me=i(p,"P",{});var qs=h(me);ve=d(qs,'First, I want to introduce what I will call a company "scaling maturity". \n      Scaling is the art of adapt (automatically of not) your tech stack to handle the incoming demand. \n      And to be fair '),be=i(qs,"STRONG",{});var Gs=h(be);we=d(Gs,"Zoom and Slack"),Gs.forEach(l),Ee=d(qs," are far more mature companies than (for example) recently-born edtech startups."),Ie=i(qs,"BR",{}),ke=d(qs,"\n      Let's analyze them using the scaling maturity model."),qs.forEach(l),Te=c(p),xe=i(p,"P",{});var Ps=h(xe);Se=i(Ps,"STRONG",{});var Ns=h(Se);Re=d(Ns,"1 - Nominal usage load:"),Ns.forEach(l),Le=d(Ps," Slack or Zoom already had a big traffic before, the peak represents a smaller percentage of their total nominal traffic compared to a startup for which it is maybe 100 or 1000 times bigger than usual."),Oe=i(Ps,"BR",{}),Ae=c(Ps),qe=i(Ps,"STRONG",{});var Cs=h(qe);Ge=d(Cs,"2 - product maturity:"),Cs.forEach(l),Pe=d(Ps," They've had time to know the specificity of their usage, the way the data is accessed, their systems points of failure, etc..."),Ne=i(Ps,"BR",{}),Ce=c(Ps),Be=i(Ps,"STRONG",{});var Bs=h(Be);De=d(Bs,"3 - technical skills:"),Bs.forEach(l),Me=d(Ps," They probably have a bigger and more experienced tech team."),Ps.forEach(l),Ve=c(p),Ue=i(p,"P",{});var Ds=h(Ue);ze=d(Ds,"To synthetize, they know a lot about how their product is used and where they are going, and so know a lot about where to focus, and what kind of effort they need to do to adapt to the extra demand. Plus their current architecture can already sustain some load."),Ds.forEach(l),We=c(p),He=i(p,"P",{});var Ms=h(He);je=d(Ms,"On the other side, young online services were just overflowed, calling for help, trying desperately to find solutions to shard and replicate their existing relational databases (more on that later)."),$e=i(Ms,"BR",{}),_e=d(Ms,"\n      I'll take an hypothetical example of an "),Fe=i(Ms,"STRONG",{});var Vs=h(Fe);Ye=d(Vs,"edtech startup"),Vs.forEach(l),Ze=d(Ms," offering innovative online class services"),Ms.forEach(l),Qe=c(p),Ke=i(p,"P",{});var Us=h(Ke);Je=i(Us,"STRONG",{});var zs=h(Je);Xe=d(zs,"1 - Nominal usage load:"),zs.forEach(l),ea=d(Us," Some clients like what they do, it's the future, they believe in their capability to grow and propose more features with time. \n      So there is a light load for now and a steady growth expected, they've opted for several cheap OVH servers."),aa=i(Us,"BR",{}),ta=c(Us),oa=i(Us,"STRONG",{});var Ws=h(oa);ra=d(Ws,"2 - product maturity:"),Ws.forEach(l),sa=d(Us," It's basically innovative education R&D so they have a very young product."),na=i(Us,"BR",{}),ia=c(Us),la=i(Us,"STRONG",{});var Hs=h(la);ca=d(Hs,"3 - technical skills:"),Hs.forEach(l),ha=d(Us," Interns, probably young employees, sometimes founder-made prototypes. At this point salaries weigh a lot..."),Us.forEach(l),da=c(p),ua=i(p,"P",{});var js=h(ua);pa=d(js,"I'll make a preliminary conclusion to the first question: businesses couldn't have anticipated and even, for the smaller ones, wasn't expected to have...\n      Indeed, if one wants to design a product with \"infinite\" (or easy to add) scaling from scratch, this will cost him a lot of "),fa=i(js,"STRONG",{});var $s=h(fa);ya=d($s,"money and time"),$s.forEach(l),ga=d(js,". \n      Two scarse resources you rationnaly prefer to invest in other things when you're a small business (finding product-market fit, adding features, growing, ...)"),js.forEach(l),ma=c(p),va=i(p,"BLOCKQUOTE",{});var _s=h(va);ba=i(_s,"DIV",{class:!0});var Fs=h(ba);wa=i(Fs,"DIV",{class:!0});var Ys=h(wa);Ea=i(Ys,"IMG",{alt:!0,src:!0}),Ys.forEach(l),ka=c(Fs),Ta=i(Fs,"DIV",{class:!0});var Zs=h(Ta);xa=d(Zs,"Covid-19 is a very good example of a "),Sa=i(Zs,"A",{href:!0,target:!0});var Qs=h(Sa);Ra=d(Qs,"black swan"),Qs.forEach(l),La=d(Zs," event.\n        An event that is very rare, has massive implications, and so for which companies haven't planned for."),Oa=i(Zs,"BR",{}),Aa=d(Zs,'\n        Indeed, this point is pretty obvious. We\'ll call it the "bird pause" üòâ'),Zs.forEach(l),Fs.forEach(l),_s.forEach(l),qa=c(p),Ga=i(p,"P",{});var Ks=h(Ga);Pa=d(Ks,"I've recently talked with several young edtech companies looking urgently for solutions.\n      They were facing the same issue: their "),Na=i(Ks,"STRONG",{});var Js=h(Na);Ca=d(Js,"relational database could not scale anymore"),Js.forEach(l),Ba=d(Ks," (mysql or postgres). \n      They were trying to add cache, pop new replica nodes, refactoring their apps and services, and their final blocker was the database...\n      The only remaining solution was to "),Da=i(Ks,"STRONG",{});var Xs=h(Da);Ma=d(Xs,"scale writes horizontally"),Xs.forEach(l),Va=d(Ks," (to shard). So they were looking for some smart proxy solutions to put in front \n      allowing the database to scale seamlessly. Not that straightforward though... And not that cheap. "),Ua=i(Ks,"BR",{}),za=d(Ks,"\n      And I don't even talk about managing the "),Wa=i(Ks,"STRONG",{});var en=h(Wa);Ha=d(en,"migration"),en.forEach(l),ja=d(Ks," in that context!"),$a=i(Ks,"BR",{}),Ks.forEach(l),_a=c(p),Fa=i(p,"P",{});var an=h(Fa);Ya=d(an,"To have an idea about how hard it is to shard an existing database I would say that the more "),Za=i(an,"EM",{});var tn=h(Za);Qa=d(tn,"complex and global"),tn.forEach(l),Ka=d(an," querying you have in place (like cross-accounts data aggregation)\n      the more "),Ja=i(an,"EM",{});var on=h(Ja);Xa=d(on,"smart and expensive"),on.forEach(l),et=d(an," the front proxy will have to be. It goes from a quite simple hash-distribution routing, to a very complex (and hard-to-scale too) query planner."),an.forEach(l),at=c(p),tt=i(p,"P",{});var rn=h(tt);ot=d(rn,"In light of the scaling maturity model, it's quite clear we can't blame them for not having the scaling mechanisms in place before, \n      but at least they could have planned better for their "),rt=i(rn,"STRONG",{});var sn=h(rt);st=d(sn,"next scaling step"),sn.forEach(l),nt=d(rn,"."),rn.forEach(l),it=c(p),lt=i(p,"H1",{class:!0});var nn=h(lt);ct=i(nn,"A",{id:!0,href:!0});var ln=h(ct);ht=d(ln,"# Then... how to scale efficiently as a startup?"),ln.forEach(l),nn.forEach(l),ut=c(p),pt=i(p,"P",{});var cn=h(pt);ft=d(cn,'We can deconstruct first what is to be "scaled"'),cn.forEach(l),yt=c(p),gt=i(p,"UL",{});var hn=h(gt);mt=i(hn,"LI",{});var dn=h(mt);vt=i(dn,"STRONG",{});var un=h(vt);bt=d(un,"servers capacity"),un.forEach(l),wt=d(dn,": costs will force you to dimension correctly their size (cpu / ram / storage). They can be physical, virtual, or containers."),dn.forEach(l),Et=c(hn),It=i(hn,"LI",{});var pn=h(It);kt=i(pn,"STRONG",{});var fn=h(kt);Tt=d(fn,"data access patterns"),fn.forEach(l),xt=d(pn,": know your usage, avoid shared state and global querying, prefer immutability."),pn.forEach(l),St=c(hn),Rt=i(hn,"LI",{});var yn=h(Rt);Lt=i(yn,"STRONG",{});var gn=h(Lt);Ot=d(gn,"human intervention & maintenance"),gn.forEach(l),At=d(yn,': "the more you automate, the faster you iterate" (Github, CI/CD, terraform, ...).'),yn.forEach(l),qt=c(hn),Gt=i(hn,"LI",{});var mn=h(Gt);Pt=i(mn,"STRONG",{});var vn=h(Pt);Nt=d(vn,"code refactoring"),vn.forEach(l),Ct=d(mn,": to scale ofter means pre-compute things, use smart caching, more synchronization, all of this has to be coded and maintained at some point."),mn.forEach(l),hn.forEach(l),Bt=c(p),Dt=i(p,"P",{});var bn=h(Dt);Mt=i(bn,"EM",{});var wn=h(Mt);Vt=d(wn,"Note: if your product does not have any real traction yet, you probably shouldn't think about this at all for now, a good old MVC prototype with whatever tech you already know will do the job."),wn.forEach(l),bn.forEach(l),Ut=c(p),zt=i(p,"P",{});var En=h(zt);Wt=d(En,"If you already have some usage, and have a first idea of where your business is going, then there are several possibilities. \n    If you have at your disposal a strong technical founder, he probably already knows what to do.\n    Otherwise, especially if you did get some founding, it would be a good idea to get someone experimented enough helping you setup the infrastructure at the beginning."),En.forEach(l),Ht=c(p),jt=i(p,"P",{});var In=h(jt);$t=d(In,"Let's explore then two different strategies"),In.forEach(l),_t=c(p),Ft=i(p,"H2",{class:!0});var kn=h(Ft);Yt=d(kn,"The infinite scaling strategy"),kn.forEach(l),Zt=c(p),Qt=i(p,"P",{});var Tn=h(Qt);Kt=d(Tn,"Well I prefer to immediately debunk the myth, it's theoretically possible to "),Jt=i(Tn,"STRONG",{});var xn=h(Jt);Xt=d(xn,"approach"),xn.forEach(l),eo=d(Tn," such an architecture but it will be very expensive (in time and money _ again things you don't really have as a startup), and possibly quite rigid."),ao=i(Tn,"BR",{}),to=d(Tn,"\n      The key here would be to use a lot of high level managed services who run on giant cloud infrastructures. \n      The services choosen should be 100% dynamic, I mean scale transparently: you shouldn't have to manage any physical nodes directly.\n      They better have included and transparent replication (to scale reads) and sharding capabilities (to scale writes) and be able to be geographically dispatched in several regions on the planet."),oo=i(Tn,"BR",{}),Tn.forEach(l),ro=c(p),so=i(p,"P",{});var Sn=h(so);no=d(Sn,"Here some managed services examples:"),Sn.forEach(l),io=c(p),lo=i(p,"UL",{});var Rn=h(lo);co=i(Rn,"LI",{});var Ln=h(co);ho=d(Ln,"Relational datastore: Google cloud spanner"),Ln.forEach(l),uo=c(Rn),po=i(Rn,"LI",{});var On=h(po);fo=d(On,"NoSQL real time sync datastore: Google firestore"),On.forEach(l),yo=c(Rn),go=i(Rn,"LI",{});var An=h(go);mo=d(An,"Replicated cache: AWS Elasticache"),An.forEach(l),vo=c(Rn),bo=i(Rn,"LI",{});var qn=h(bo);wo=d(qn,"Distributed File storage: AWS S3"),qn.forEach(l),Eo=c(Rn),Io=i(Rn,"LI",{});var Gn=h(Io);ko=d(Gn,"Data streaming: Google pubsub"),Gn.forEach(l),To=c(Rn),xo=i(Rn,"LI",{});var Pn=h(xo);So=d(Pn,"Data warehouse: Google Bigquery"),Pn.forEach(l),Rn.forEach(l),Ro=c(p),Lo=i(p,"P",{});var Nn=h(Lo);Oo=i(Nn,"EM",{});var Cn=h(Oo);Ao=d(Cn,"Yes, that's a lot of GCP services, to be honest they are ahead..!"),Cn.forEach(l),Nn.forEach(l),qo=c(p),Go=i(p,"DIV",{style:!0});var Bn=h(Go);Po=i(Bn,"IMG",{src:!0,class:!0}),Bn.forEach(l),Co=c(p),Bo=i(p,"EM",{});var Dn=h(Bo);Do=d(Dn,"Actually I have to nuance the curve a bit:"),Dn.forEach(l),Mo=c(p),Vo=i(p,"UL",{});var Mn=h(Vo);Uo=i(Mn,"LI",{});var Vn=h(Uo);zo=d(Vn,"Price is actually super low at the very beginning: services often offer free plan for a limited volume or during a limited period"),Vn.forEach(l),Wo=c(Mn),Ho=i(Mn,"LI",{});var Un=h(Ho);jo=d(Un,"On the other side, costs can decrease when you reach a big volume because of degressive pricing, or by using provider specific cost optimization techniques"),Un.forEach(l),Mn.forEach(l),$o=c(p),_o=i(p,"H2",{class:!0});var zn=h(_o);Fo=d(zn,"The step by step scaling strategy"),zn.forEach(l),Yo=c(p),Zo=i(p,"DIV",{style:!0});var Wn=h(Zo);Qo=i(Wn,"IMG",{src:!0,class:!0}),Wn.forEach(l),Jo=c(p),Xo=i(p,"P",{});var Hn=h(Xo);er=d(Hn,"This is the usual and probably the most efficient strategy, you do with what you have at first (skills, people, ...), but you always stay a step ahead, \n      you are conscious about what your system points of failure are, and how to resolve them. You plan carefully for \n      the next system migrations. This requires specifically:"),Hn.forEach(l),ar=c(p),tr=i(p,"UL",{});var jn=h(tr);or=i(jn,"LI",{});var $n=h(or);rr=d($n,"To develop a strong "),sr=i($n,"STRONG",{});var _n=h(sr);nr=d(_n,"monitoring and alerting pipeline"),_n.forEach(l),ir=d($n,". You have plenty of tools to do that easily nowadays."),$n.forEach(l),lr=c(jn),cr=i(jn,"LI",{});var Fn=h(cr);hr=d(Fn,"To "),dr=i(Fn,"STRONG",{});var Yn=h(dr);ur=d(Yn,"test every migration"),Yn.forEach(l),pr=d(Fn," before. The more the system is distributed, the harder the problems are predictable. It's easier to just test it."),Fn.forEach(l),jn.forEach(l),fr=c(p),yr=i(p,"P",{});var Zn=h(yr);gr=d(Zn,"As examples, the scaling next step could be:"),Zn.forEach(l),mr=c(p),vr=i(p,"UL",{});var Qn=h(vr);br=i(Qn,"LI",{});var Kn=h(br);wr=d(Kn,"Shard the database or the streaming pipeline"),Kn.forEach(l),Er=c(Qn),Ir=i(Qn,"LI",{});var Jn=h(Ir);kr=d(Jn,"Introduce automatic scaling of your HTTP services"),Jn.forEach(l),Tr=c(Qn),xr=i(Qn,"LI",{});var Xn=h(xr);Sr=d(Xn,"Refactor your application to isolate your data in silos, introduce some kind of load balancing, and replicate parts of your system"),Xn.forEach(l),Qn.forEach(l),Rr=c(p),Lr=i(p,"P",{});var ei=h(Lr);Or=d(ei,"The core principle is to be cost efficient and smart: to scale efficiently you have to scale in the right proportion and at the right time, too soon and it will cost you too much, too late and you'll loose some quality of service... \n      And this is why having a good feedback (automated) on your current architecture is a real plus."),Ar=i(ei,"BR",{}),qr=d(ei,"\n      Clouds often offer pre-activated monitoring metrics, \n      for example if you use AWS Beanstalk environments for your web services it provides you automatically the following ones:"),ei.forEach(l),Gr=c(p),Pr=i(p,"P",{}),h(Pr).forEach(l),Nr=i(p,"UL",{});var ai=h(Nr);Cr=i(ai,"LI",{});var ti=h(Cr);Br=d(ti,"requests count"),ti.forEach(l),Dr=c(ai),Mr=i(ai,"LI",{});var oi=h(Mr);Vr=d(oi,"average latency"),oi.forEach(l),Ur=c(ai),zr=i(ai,"LI",{});var ri=h(zr);Wr=d(ri,"load"),ri.forEach(l),Hr=c(ai),jr=i(ai,"LI",{});var si=h(jr);$r=d(si,"CPU"),si.forEach(l),_r=c(ai),Fr=i(ai,"LI",{});var ni=h(Fr);Yr=d(ni,"network in/out"),ni.forEach(l),Zr=c(ai),Qr=i(ai,"LI",{});var ii=h(Qr);Kr=d(ii,"..."),ii.forEach(l),ai.forEach(l),Jr=c(p),Xr=i(p,"P",{});var li=h(Xr);es=d(li,"It is super fast then to visualize in dashboards, to enable alerting, or even activate auto-scaling based on CPU percentage, or network usage...\n    And you have the tools now to scale your web services correctly. After all, more knowledge at the beginning means better decisions at the end."),li.forEach(l),as=c(p),ts=i(p,"P",{});var ci=h(ts);os=d(ci,"Of course, smart scaling is specific scaling, so every case has a different story..! (databases, queues, pubsubs, data analytics, ...)."),ci.forEach(l),rs=c(p),ss=i(p,"P",{});var hi=h(ss);ns=d(hi,"To conclude, the right solution probably lies in between the two strategies. It depends on your budget, the technical complexity of your product, and the skills you have at your disposal..."),is=i(hi,"BR",{}),ls=d(hi,"\n      At least I hope you have new ideas now about how to better anticipate scale !"),hi.forEach(l),cs=c(p),hs=i(p,"BR",{}),ds=c(p),us=i(p,"P",{});var di=h(us);ps=i(di,"STRONG",{});var ui=h(ps);fs=d(ui,"Scale safe üëã"),ui.forEach(l),ys=i(di,"BR",{}),gs=d(di,"\n      By the way if you have scaling needs / specific questions, "),ms=i(di,"A",{href:!0});var pi=h(ms);vs=d(pi,"I'd be happy to help"),pi.forEach(l),di.forEach(l),bs=c(p),ws=i(p,"BR",{}),Es=c(p),Is=i(p,"DIV",{id:!0}),h(Is).forEach(l),p.forEach(l),u.forEach(l),s.forEach(l),r.forEach(l),this.h()},h(){u(t,"rel","canonical"),u(t,"href",e[3]),u(m,"property","og:title"),u(m,"content",v="@cyppan | "+e[0]),u(b,"property","og:locale"),u(b,"content","en_US"),u(w,"name","description"),u(w,"content",e[1]),u(E,"property","og:description"),u(E,"content",e[1]),u(I,"property","og:url"),u(I,"content",e[3]),u(k,"property","og:site_name"),u(k,"content","@cyppan"),u(O,"class","title is-2"),p(O,"text-align","center"),u(ce,"id","scaling-maturity-model"),u(ce,"href",de=e[2]+"#scaling-maturity-model"),u(le,"class","title is-3 svelte-1ou6gkp"),fe.src!==(ye="/scaling-maturity.png")&&u(fe,"src","/scaling-maturity.png"),u(fe,"class","is-center"),p(pe,"text-align","center"),u(Ea,"alt","black swan Image by Holger Detje from Pixabay"),Ea.src!==(Ia="/black-swan.jpg")&&u(Ea,"src","/black-swan.jpg"),u(wa,"class","column is-one-quarter"),u(Sa,"href","https://en.wikipedia.org/wiki/Black_swan_theory"),u(Sa,"target","_blank"),u(Ta,"class","column"),u(ba,"class","columns"),u(ct,"id","scale-efficiently"),u(ct,"href",dt=e[2]+"#scale-efficiently"),u(lt,"class","title is-3 svelte-1ou6gkp"),u(Ft,"class","subtitle is-4 svelte-1ou6gkp"),Po.src!==(No="/dynamic-scaling-curve.png")&&u(Po,"src","/dynamic-scaling-curve.png"),u(Po,"class","is-center"),p(Go,"text-align","center"),u(_o,"class","subtitle is-4 svelte-1ou6gkp"),Qo.src!==(Ko="/static-scaling-curve.png")&&u(Qo,"src","/static-scaling-curve.png"),u(Qo,"class","is-center"),p(Zo,"text-align","center"),u(ms,"href","/"),u(Is,"id","disqus_thread"),u(L,"class","container content svelte-1ou6gkp"),u(R,"class","box"),u(S,"class","container svelte-1ou6gkp"),u(x,"class","section")},m(e,a){f(document.head,t),f(document.head,m),f(document.head,b),f(document.head,w),f(document.head,E),f(document.head,I),f(document.head,k),y(e,T,a),y(e,x,a),f(x,S),f(S,R),f(R,L),f(L,O),f(O,A),f(L,q),f(L,G),f(G,P),f(P,N),f(N,C),f(P,B),f(P,D),f(D,M),f(L,V),f(L,U),f(U,z),f(L,W),f(L,H),f(H,j),f(L,$),f(L,_),f(_,F),f(L,Y),f(L,Z),f(Z,Q),f(Q,K),f(K,J),f(Z,X),f(Z,ee),f(ee,ae),f(ae,te),f(Z,oe),f(Z,re),f(re,se),f(se,ne),f(L,ie),f(L,le),f(le,ce),f(ce,he),f(L,ue),f(L,pe),f(pe,fe),f(L,ge),f(L,me),f(me,ve),f(me,be),f(be,we),f(me,Ee),f(me,Ie),f(me,ke),f(L,Te),f(L,xe),f(xe,Se),f(Se,Re),f(xe,Le),f(xe,Oe),f(xe,Ae),f(xe,qe),f(qe,Ge),f(xe,Pe),f(xe,Ne),f(xe,Ce),f(xe,Be),f(Be,De),f(xe,Me),f(L,Ve),f(L,Ue),f(Ue,ze),f(L,We),f(L,He),f(He,je),f(He,$e),f(He,_e),f(He,Fe),f(Fe,Ye),f(He,Ze),f(L,Qe),f(L,Ke),f(Ke,Je),f(Je,Xe),f(Ke,ea),f(Ke,aa),f(Ke,ta),f(Ke,oa),f(oa,ra),f(Ke,sa),f(Ke,na),f(Ke,ia),f(Ke,la),f(la,ca),f(Ke,ha),f(L,da),f(L,ua),f(ua,pa),f(ua,fa),f(fa,ya),f(ua,ga),f(L,ma),f(L,va),f(va,ba),f(ba,wa),f(wa,Ea),f(ba,ka),f(ba,Ta),f(Ta,xa),f(Ta,Sa),f(Sa,Ra),f(Ta,La),f(Ta,Oa),f(Ta,Aa),f(L,qa),f(L,Ga),f(Ga,Pa),f(Ga,Na),f(Na,Ca),f(Ga,Ba),f(Ga,Da),f(Da,Ma),f(Ga,Va),f(Ga,Ua),f(Ga,za),f(Ga,Wa),f(Wa,Ha),f(Ga,ja),f(Ga,$a),f(L,_a),f(L,Fa),f(Fa,Ya),f(Fa,Za),f(Za,Qa),f(Fa,Ka),f(Fa,Ja),f(Ja,Xa),f(Fa,et),f(L,at),f(L,tt),f(tt,ot),f(tt,rt),f(rt,st),f(tt,nt),f(L,it),f(L,lt),f(lt,ct),f(ct,ht),f(L,ut),f(L,pt),f(pt,ft),f(L,yt),f(L,gt),f(gt,mt),f(mt,vt),f(vt,bt),f(mt,wt),f(gt,Et),f(gt,It),f(It,kt),f(kt,Tt),f(It,xt),f(gt,St),f(gt,Rt),f(Rt,Lt),f(Lt,Ot),f(Rt,At),f(gt,qt),f(gt,Gt),f(Gt,Pt),f(Pt,Nt),f(Gt,Ct),f(L,Bt),f(L,Dt),f(Dt,Mt),f(Mt,Vt),f(L,Ut),f(L,zt),f(zt,Wt),f(L,Ht),f(L,jt),f(jt,$t),f(L,_t),f(L,Ft),f(Ft,Yt),f(L,Zt),f(L,Qt),f(Qt,Kt),f(Qt,Jt),f(Jt,Xt),f(Qt,eo),f(Qt,ao),f(Qt,to),f(Qt,oo),f(L,ro),f(L,so),f(so,no),f(L,io),f(L,lo),f(lo,co),f(co,ho),f(lo,uo),f(lo,po),f(po,fo),f(lo,yo),f(lo,go),f(go,mo),f(lo,vo),f(lo,bo),f(bo,wo),f(lo,Eo),f(lo,Io),f(Io,ko),f(lo,To),f(lo,xo),f(xo,So),f(L,Ro),f(L,Lo),f(Lo,Oo),f(Oo,Ao),f(L,qo),f(L,Go),f(Go,Po),f(L,Co),f(L,Bo),f(Bo,Do),f(L,Mo),f(L,Vo),f(Vo,Uo),f(Uo,zo),f(Vo,Wo),f(Vo,Ho),f(Ho,jo),f(L,$o),f(L,_o),f(_o,Fo),f(L,Yo),f(L,Zo),f(Zo,Qo),f(L,Jo),f(L,Xo),f(Xo,er),f(L,ar),f(L,tr),f(tr,or),f(or,rr),f(or,sr),f(sr,nr),f(or,ir),f(tr,lr),f(tr,cr),f(cr,hr),f(cr,dr),f(dr,ur),f(cr,pr),f(L,fr),f(L,yr),f(yr,gr),f(L,mr),f(L,vr),f(vr,br),f(br,wr),f(vr,Er),f(vr,Ir),f(Ir,kr),f(vr,Tr),f(vr,xr),f(xr,Sr),f(L,Rr),f(L,Lr),f(Lr,Or),f(Lr,Ar),f(Lr,qr),f(L,Gr),f(L,Pr),f(L,Nr),f(Nr,Cr),f(Cr,Br),f(Nr,Dr),f(Nr,Mr),f(Mr,Vr),f(Nr,Ur),f(Nr,zr),f(zr,Wr),f(Nr,Hr),f(Nr,jr),f(jr,$r),f(Nr,_r),f(Nr,Fr),f(Fr,Yr),f(Nr,Zr),f(Nr,Qr),f(Qr,Kr),f(L,Jr),f(L,Xr),f(Xr,es),f(L,as),f(L,ts),f(ts,os),f(L,rs),f(L,ss),f(ss,ns),f(ss,is),f(ss,ls),f(L,cs),f(L,hs),f(L,ds),f(L,us),f(us,ps),f(ps,fs),f(us,ys),f(us,gs),f(us,ms),f(ms,vs),f(L,bs),f(L,ws),f(L,Es),f(L,Is)},p(e,[t]){1&t&&a!==(a="\n    @cyppan | "+e[0]+"\n  ")&&(document.title=a)},i:g,o:g,d(e){l(t),l(m),l(b),l(w),l(E),l(I),l(k),e&&l(T),e&&l(x)}}}function v(e,a,t){const o="/blog/en/2020-04-01-scaling-stories-how-startups-failed";return["scaling stories: how startups failed","During COVID-19, online services, especially meeting utilities or edtech programs, had to face a particularly sustained usage, enduring a unplanned and lasting peak load recently. Couldn't those businesses have anticipated more? Couldn't they have a stronger tech at the origin, exceptional event or not?",o,"https://cyppan.me/blog/en/2020-04-01-scaling-stories-how-startups-failed"]}export default class extends e{constructor(e){super(),a(this,e,v,m,t,{title:0,description:1,path:2,url:3})}get title(){return this.$$.ctx[0]}get description(){return this.$$.ctx[1]}get path(){return this.$$.ctx[2]}get url(){return this.$$.ctx[3]}}
