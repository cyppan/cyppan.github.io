<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content="IE=edge" http-equiv=X-UA-Compatible> <meta content="width=device-width,initial-scale=1" name=viewport> <base href=/ > <link href=/apple-touch-icon.png rel=apple-touch-icon sizes=180x180> <link href=/favicon-32x32.png rel=icon sizes=32x32 type=image/png> <link href=/favicon-16x16.png rel=icon sizes=16x16 type=image/png> <link href=/site.webmanifest rel=manifest> <link href=/styles.css rel=stylesheet> <link href=client/main.637669398.css rel=stylesheet><link href=client/2020-04-01-covid-19-scaling-stories-how-startups-failed.3d9c4f76.css rel=stylesheet><link href=client/client.0fff3ffa.css rel=stylesheet> <script defer src=https://use.fontawesome.com/releases/v5.3.1/js/all.js></script> <noscript id=sapper-head-start></noscript><title> @cyppan | COVID-19 scaling stories: how startups failed </title><link href=https://cyppan.me/blog/en/2020-04-01-covid-19-scaling-stories-how-startups-failed rel=canonical><meta content="@cyppan | COVID-19 scaling stories: how startups failed" property=og:title><meta content=en_US property=og:locale><meta content="During COVID-19, online services, especially meeting utilities or edtech programs, had to face a particularly sustained usage, enduring a unplanned and lasting peak load recently. Couldn't those businesses have anticipated more? Couldn't they have a stronger tech at the origin, exceptional event or not?" name=description><meta content="During COVID-19, online services, especially meeting utilities or edtech programs, had to face a particularly sustained usage, enduring a unplanned and lasting peak load recently. Couldn't those businesses have anticipated more? Couldn't they have a stronger tech at the origin, exceptional event or not?" property=og:description><meta content=https://cyppan.me/blog/en/2020-04-01-covid-19-scaling-stories-how-startups-failed property=og:url><meta content=@cyppan property=og:site_name><noscript id=sapper-head-end></noscript> </head> <body> <nav class=navbar> <div class=container> <div class=navbar-brand> <a href=/ class=navbar-item> @cyppan üìö </a> <span class="burger navbar-burger" data-target=navbarMenuHeroA> <span></span> <span></span> <span></span> </span> </div> <div class=navbar-menu id=navbarMenuHeroA> <div class=navbar-end> <a href=#articles class=navbar-item> Articles </a> <a href=#code class=navbar-item> Code </a> </div> </div> </div> </nav> <div id=sapper> <main> <section class=section><div class="svelte-1ou6gkp container"><div class=box><div class="svelte-1ou6gkp container content"><h1 class="title is-2" style=text-align:center>COVID-19 scaling stories: how startups failed</h1> <blockquote><ul><li>"It doesn't work at all, my children can't connect to the online class !"</li> <li>"We're very sorry about that it's an exceptional situation, we're working on the problem with our tech team and will keep you posted."</ul></blockquote> <p>It is the kind of tweet & LinkedIn messages that have exploded during those recent COVID-times. Indeed, online services, especially meeting utilities or edtech programs, had to face a particularly sustained usage, enduring a unplanned and lasting peak load. I've seen only a few able to maintain an acceptable quality of service (at least, Slack and Zoom have shined with their professionnalism for what I could see), the bigger part having to establish a connection queue for its clients, or even to shutdown their entire service for an endless "maintenance". </p> <p>Even being comprehensive, when facing an online service availability problem, we're very quick to change. After all why shouldn't we benefit for the plethora of offering at our disposal? And after the crisis has passed, it's highly expected that we'll see no reason to change, no reason to go back to the initial fancy startup product we were using at the origin. For a startup that's a lot of clients lost, maybe enough to not be able to start the traction back. Terrible death for a business, another virus victim. </p> <p>But üßê </p> <ul><li><strong>Couldn't those businesses have anticipated more?</strong></li> <li><strong>Couldn't they have a stronger tech at the origin, exceptional event or not?</strong></li> <li><strong>Once facing the problem, couldn't they adapt better and faster?</strong></ul> <h1 class="svelte-1ou6gkp is-3 title"><a href=/blog/en/2020-04-01-covid-19-scaling-stories-how-startups-failed#scaling-maturity-model id=scaling-maturity-model># The scaling maturity model</a></h1> <div style=text-align:center><img src=/scaling-maturity.png class=is-center></div> <p>First, I want to introduce what I will call a company "scaling maturity". Scaling is the art of adapt (automatically of not) your tech stack to handle the incoming demand. And to be fair <strong>Zoom and Slack</strong> are far more mature companies than (for example) recently-born edtech startups.<br> Let's analyze them using the scaling maturity model. </p> <p><strong>1 - Nominal usage load:</strong> Slack or Zoom already had a big traffic before, the peak represents a smaller percentage of their total nominal traffic compared to a startup for which it is maybe 100 or 1000 times bigger than usual.<br> <strong>2 - product maturity:</strong> They've had time to know the specificity of their usage, the way the data is accessed, their systems points of failure, etc...<br> <strong>3 - technical skills:</strong> They probably have a bigger and more experienced tech team. </p> <p>To synthetize, they know a lot about how their product is used and where they are going, and so know a lot about where to focus, and what kind of effort they need to do to adapt to the extra demand. Plus their current architecture can already sustain some load. </p> <p>On the other side, young online services were just overflowed, calling for help, trying desperatly to find solutions to shard and replicate their existing relational databases (more on that later).<br> I'll take an hypothetical example of an <strong>edtech startup</strong> offering innovative online class services </p> <p><strong>1 - Nominal usage load:</strong> Some clients like what they do, it's the future, they believe in their capability to grow and propose more features with time. So there is a light load for now and a steady growth expected, they've opted for several cheap OVH servers.<br> <strong>2 - product maturity:</strong> It's basically innovative education R&D so they have a very young product.<br> <strong>3 - technical skills:</strong> Interns, probably young employees, sometimes founder-made prototypes. At this point salaries weigh a lot... </p> <p>I'll make a preliminary conclusion to the first question: businesses couldn't have anticipated and even, for the smaller ones, wasn't expected to have... Indeed, if one wants to design a product with "infinite" (or easy to add) scaling from scratch, this will cost him a lot of <strong>money and time</strong>. Two scarse resources you rationnaly prefer to invest in other things when you're a small business (finding product-market fit, adding features, growing, ...) </p> <blockquote><div class=columns><div class="column is-one-quarter"><img src=/black-swan.jpg alt="black swan Image by Holger Detje from Pixabay"></div> <div class=column>Covid19 is a very good example of a <a href=https://en.wikipedia.org/wiki/Black_swan_theory target=_blank>black swan</a> event. An event that is very rare, has massive implications, and so for which companies haven't planned for.<br> Indeed, this point is pretty obvious. We'll call it the "bird pause" üòâ </div></div></blockquote> <p>I've recently talked with several young edtech companies looking urgently for solutions. They were facing the same issue: their <strong>relational database could not scale anymore</strong> (mysql or postgres). They were trying to add cache, pop new replica nodes, refactoring their apps and services, and their final blocker was the database... The only remaining solution was to <strong>scale writes horizontally</strong> (to shard). So they were looking for some smart proxy solutions to put in front allowing the database to scale seamlessly. Not that straightforward though... And not that cheap. <br> And I don't even talk about managing the <strong>migration</strong> in that context!<br></p> <p>To have an idea about how hard it is to shard an existing database I would say that the more <em>complex and global</em> querying you have in place (like cross-accounts data aggregation) the more <em>smart and expensive</em> the front proxy will have to be. It goes from a quite simple hash-distribution routing, to a very complex (and hard-to-scale too) query planner. </p> <p>In light of the scaling maturity model, it's quite clear we can't blame them for not having the scaling mechanisms in place before, but at least they could have planned better for their <strong>next scaling step</strong>. </p> <h1 class="svelte-1ou6gkp is-3 title"><a href=/blog/en/2020-04-01-covid-19-scaling-stories-how-startups-failed#scale-efficiently id=scale-efficiently># Then... how to scale efficiently as a startup?</a></h1> <p>We can deconstruct first what is to be "scaled" </p> <ul><li><strong>servers capacity</strong>: costs will force you to dimension correctly their size (cpu / ram / storage). They could be physical, virtual, or containers.</li> <li><strong>data access patterns</strong>: better know your usage, avoid shared state and global querying and prefer immutability.</li> <li><strong>human intervention & maintenance</strong>: "the more you automate, the faster you iterate" (Github, CI/CD, terraform, ...).</li> <li><strong>code refactoring</strong>: to scale ofter means pre-compute things, use smart caching, more synchronization, all of this has to be coded and maintained at some point.</ul> <p><em>Note: if your product does not have any real traction yet, you probably shouldn't think about this at all for now, a good old MVC prototype with whatever tech you already know will do the job. </em></p> <p>If you already have some usage, and have a first idea of where your business is going, then there are several possibilities. If you have at your disposal a strong technical founder, he probably already knows what to do. Otherwise, especially if you did get some founding, it would be a good idea to get someone experimented enough helping you setup the infrastructure at the beginning. </p> <p>Let's explore then two different strategies</p> <h2 class="svelte-1ou6gkp is-4 subtitle">The infinite scaling strategy</h2> <p>Well I prefer to immediately debunk the myth, it's theoretically possible to <strong>approach</strong> such an architecture but it will be very expensive, and possibly quite rigid.<br> The key here would be to use a lot of high level managed services who run on giant cloud infrastructures. The services choosen should be 100% dynamic, I mean scale transparently : you shouldn't have to manage any physical nodes directly. They better have included and transparent replication (to scale reads) and sharding capabilities (to scale writes) and be able to be geographically dispatched in several regions on the planet.<br></p> <p>Here some managed services examples: </p> <ul><li>Relational datastore: Google cloud spanner</li> <li>NoSQL real time sync datastore: Google firestore</li> <li>Replicated cache: AWS Elasticache</li> <li>Distributed File storage: AWS S3</li> <li>Data streaming: Google pubsub</li> <li>Columnar-storage (optimized for aggregation) Data lake: Google Bigquery</ul> <p><em>Yes, that's a lot of GCP services, to be honest they are ahead..!</em></p> <div style=text-align:center><img src=/dynamic-scaling-curve.png class=is-center></div> <em>Actually I have to nuance the curve a bit: </em> <ul><li>Price is actually super low at the very beginning: services often offer free plan for a limited volume or during a limited period</li> <li>On the other side, costs can decrease when you reach a big volume because of degressive pricing, or by using provider specific cost optimization techniques</ul> <h2 class="svelte-1ou6gkp is-4 subtitle">The step by step scaling strategy</h2> <div style=text-align:center><img src=/static-scaling-curve.png class=is-center></div> <p>This is the usual and probably the most efficient strategy, you do with what you have at first (skills, people, ...), but you always stay a step ahead, you are conscious about what your system points of failure are, and how to resolve them. You plan carefully for the next system migrations. This requires specifically: </p> <ul><li>To develop a strong <strong>monitoring and alerting pipeline</strong>. You have plenty of tools to do that easily nowadays.</li> <li>To <strong>test every migration</strong> before. The more the system is distributed, the harder the problems will be predictable. It's easier to just test it.</ul> <p>As examples, the scaling next step could be: </p> <ul><li>Shard the database or the streaming pipeline</li> <li>Introduce automatic scaling of your HTTP services</li> <li>Refactor your application to isolate your data in silos, introduce some kind of load balancing, and replicate parts of your system</ul> <p><em>Note: smart scaling is specific scaling, so every case has a different story..! </em></p> <p>To conclude, the right solution probably lies in between the two strategies. It depends on your budget, the technical complexity of your product, and the skills you have at your disposal.<br> At least I hope you have now new ideas about how to better anticipate scale ! </p> <br> <p><strong>Scale safe üëã</strong><br> By the way if you have scaling needs / specific questions, <a href=/ >I'd be happy to help</a></p> <br> <div id=disqus_thread></div></div></div></div> </section></main></div> <footer class=footer> <div class="has-text-centered content"> <p> Built with Sapper, Svelte JS and Bulma CSS. The source code is licensed <a href=http://opensource.org/licenses/mit-license.php target=_blank>MIT</a>. The website content is licensed <a href=http://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>CC BY NC SA 4.0</a>. </p> </div> </footer> <style>.content h3 .icon{align-items:inherit;display:inherit;justify-content:inherit}</style> <script> document.addEventListener('DOMContentLoaded', () => {
        // Get all "navbar-burger" elements
        const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
        // Check if there are any navbar burgers
        if ($navbarBurgers.length > 0) {
          // Add a click event on each of them
          $navbarBurgers.forEach( el => {
            el.addEventListener('click', () => {
              // Get the target from the "data-target" attribute
              const target = el.dataset.target;
              const $target = document.getElementById(target);
              // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
              el.classList.toggle('is-active');
              $target.classList.toggle('is-active');
            });
          });
        }
      }); </script> <script> (function() { // DON'T EDIT BELOW THIS LINE
		var d = document, s = d.createElement('script');
		s.src = 'https://cyppan-me.disqus.com/embed.js';
		s.setAttribute('data-timestamp', +new Date());
		(d.head || d.body).appendChild(s);
		})(); </script> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,null,{}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.0fff3ffa.js"}catch(e){main="/client/legacy/client.3055f79e.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> 